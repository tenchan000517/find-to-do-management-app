# BUG: タスク担当者取得問題

**作成日**: 2025年6月30日  
**分類**: Bug - Data  
**影響範囲**: タスク管理機能  
**優先度**: Critical  

---

## 🚨 問題概要

タスク機能においてユーザー別の表示で何も表示されない問題。担当者情報が正しく取得・表示されていない。

### **具体的な症状**
- ユーザー別タスクリストが空になる
- 担当者フィルターが機能しない
- タスク作成時の担当者割り当てが反映されない
- ユーザー情報とタスクの関連付けが不適切

---

## 🔍 技術的分析

### **推定原因**
1. **データベース関連付け問題**
   - User-Task間のリレーション設定不良
   - 外部キー制約の設定ミス

2. **API実装問題**
   - 担当者情報取得APIの実装不良
   - JOINクエリの実装ミス

3. **フロントエンド実装問題**
   - ユーザー情報の状態管理不良
   - 担当者フィルター機能の実装ミス

---

## 🔍 調査が必要な項目

### **バックエンド確認事項**
1. **データベーススキーマ**
   - `Task`テーブルの`assignedUserId`カラム
   - `User`テーブルとの関連付け確認

2. **API実装**
   - `GET /api/tasks?userId=xxx` の実装
   - 担当者情報を含むレスポンス確認

3. **データ整合性**
   - 既存タスクの担当者データ確認
   - 無効な担当者IDの存在確認

### **フロントエンド確認事項**
1. **状態管理**
   - ユーザー情報の取得・保持
   - タスクリストの担当者フィルター

2. **UI表示**
   - 担当者選択UIの実装
   - 担当者情報の表示実装

---

## 🎯 解決方針

### **Phase 1: データ調査**
- [ ] データベーススキーマの確認
- [ ] 既存データの整合性確認
- [ ] API仕様の確認

### **Phase 2: 修正実装**
- [ ] データベース関連付けの修正
- [ ] API実装の修正
- [ ] フロントエンド表示ロジックの修正

### **Phase 3: データ修復**
- [ ] 既存データの修復
- [ ] 担当者情報の再設定

### **Phase 4: テスト・検証**
- [ ] 担当者別タスク表示の確認
- [ ] 新規タスク作成時の担当者設定確認
- [ ] 担当者変更機能の確認

---

**関連ファイル**: 
- `src/app/api/tasks/`
- `src/components/TaskList/`
- `src/types/task.ts`
- `prisma/schema.prisma`

**ステータス**: 調査待ち  
**担当**: 未定  
**期限**: 未定