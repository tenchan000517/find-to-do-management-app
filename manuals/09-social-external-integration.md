# ソーシャル・外部連携システム マニュアル

## 概要

FIND to DO Management Appのソーシャル・外部連携システムは、各種外部サービスとの連携により業務効率を大幅に向上させる機能です。LINE Bot、Slack、Google サービス、その他のビジネスツールと連携し、シームレスな情報共有と自動化を実現します。

### 主要特徴
- LINE Botによるタスク管理と通知
- Slack連携による チーム コミュニケーション
- Google サービス（Calendar、Drive、Analytics）との同期
- GitHub、Trello などの開発ツール連携
- 外部データの自動取り込み機能

---

## 目次

1. [LINE Bot連携](#line-bot連携)
2. [Slack連携](#slack連携)
3. [Google サービス連携](#google-サービス連携)
4. [開発ツール連携](#開発ツール連携)
5. [SNS・マーケティングツール連携](#snsマーケティングツール連携)
6. [データ連携・API機能](#データ連携api機能)
7. [セキュリティ・認証設定](#セキュリティ認証設定)
8. [トラブルシューティング](#トラブルシューティング)

---

## LINE Bot連携

### LINE Botの基本設定

#### 1. LINE Bot友だち追加
1. メインメニューから「外部連携」を選択
2. 「LINE Bot」セクションで「連携開始」をクリック
3. QRコードをLINEアプリでスキャン
4. 「FIND to DO Management」を友だち追加

#### 2. 初期セットアップ
**自動ウェルカムメッセージ後:**
1. Web画面でユーザーアカウントとLINEアカウントを連携
2. LINE上で「メニュー」と送信してメインメニューを表示
3. 通知設定をカスタマイズ（Web設定画面）

#### 3. LINEユーザーID連携の確認
1. Web設定画面の「LINE連携」タブ
2. LINEユーザーIDとアカウントの紐付け状況を確認
3. 未連携の場合は再度QRコード認証を実行

### LINE Botの完全操作ガイド

#### メンション機能による直接操作
**基本操作:** `@FIND to DO [内容]`

**自然言語でのデータ作成例:**
- **タスク**: `@FIND to DO 企画書作成 来週金曜まで`
- **予定**: `@FIND to DO 明日14時 田中さんと会議`
- **アポイント**: `@FIND to DO ABC商事 来週火曜 商談`
- **人脈**: `@FIND to DO 人脈 山田太郎 ABC商事 営業部長`
- **メモ**: `@FIND to DO メモ 営業手法について`

#### メニューベース操作
1. **メニューコマンド**: 「メニュー」「menu」「Menu」のいずれかを送信
2. **8つの選択肢**:
   - 📅 個人予定
   - 🎯 イベント・予定  
   - 📋 タスク
   - 📊 プロジェクト
   - 📅 アポイントメント
   - 👤 人脈・コネクション
   - 📝 メモ・ナレッジ
   - 🔚 セッション終了

#### AI分析・確認プロセス
1. **自動AI分析**: 入力内容を7つのデータタイプで自動分類
2. **確認・修正**: ✅正しい / 🔧修正 の選択
3. **詳細設定**: 📝詳細入力 で各フィールドの編集
4. **最終保存**: 💾保存 でWebシステムに反映

### 詳細フィールド編集機能

#### 利用可能な全フィールド（例：タスク）
- **📋 タスク名**: edit_field_task_title
- **📊 プロジェクト**: edit_field_task_project  
- **⏰ 期限**: edit_field_task_dueDate
- **🎯 優先度**: edit_field_task_priority (A/B/C/D)
- **👤 担当者**: edit_field_task_assignee
- **⏱️ 工数**: edit_field_task_estimatedHours
- **📄 詳細**: edit_field_task_description

#### 担当者・優先度の自動選択
- **担当者選択**: 登録ユーザーから自動選択UI表示
- **優先度設定**: 🔴高(A) / 🟡中(B) / 🟢低(C) / ⚪最低(D)
- **スキップ機能**: 設定不要な項目はスキップ可能

### セッション管理システム

#### セッション状態と@メンション要件
- **通常状態**: @メンション必須
- **メニューセッション**: メンション不要（2分間）
- **データ入力セッション**: メンション不要（30分間）
- **フィールド編集中**: メンション不要（30分間）

#### セッションタイムアウト管理
- **自動タイムアウト**: 指定時間経過で通常状態に復帰
- **手動終了**: 🔚セッション終了ボタン
- **セッション延長**: 操作継続で自動延長

### 営業特化AI機能

#### 営業キーワード自動検知
**システムが自動認識するキーワード:**
- **契約・成約**: 契約、成約、決定、サイン、クロージング
- **提案・企画**: 提案、企画、プレゼン、見積もり、査定
- **営業活動**: フォロー、商談、ヒアリング、アプローチ
- **競合・分析**: 競合、分析、予測、成約確率

#### 営業データの自動処理
- **商談ステージ自動判定**: キーワードベースでの進捗推定
- **成約確率AI予測**: 過去データ分析による確率算出
- **フォローアップ提案**: 最適なアクションタイミング通知

### Web連携・リアルタイム同期

#### LINE → Web データフロー
1. **LINE入力**: 自然言語またはメニュー操作
2. **AI処理**: 自動分類・フィールド抽出
3. **データ保存**: Prisma経由でPostgreSQLに保存
4. **Web反映**: リアルタイムでダッシュボード更新

#### Web → LINE 通知フロー  
1. **Web操作**: ダッシュボードでの変更・作成
2. **Webhook処理**: 変更イベントの検知
3. **通知判定**: 通知設定に基づく配信判定
4. **LINE配信**: LINE Messaging APIで通知送信

### 通知システムの詳細設定

#### 自動通知される全パターン
- **新規割り当て**: 自分に新しいタスクが割り当てられた
- **期限アラート**: 3日前/1日前/当日/超過の4段階
- **進捗更新**: 担当タスクの進捗が変更された
- **コメント追加**: メンションされた場合
- **プロジェクト変更**: 参加プロジェクトの重要な変更
- **営業アラート**: 営業関連の緊急通知

#### 通知カスタマイズ設定
**Web設定画面での詳細設定:**
1. **通知時間帯**: 平日9:00-18:00のみ等
2. **通知頻度**: 即座/1時間ごと/日次サマリー
3. **緊急度フィルタ**: 高優先度のみ/全て
4. **プロジェクト別**: プロジェクトごとの通知ON/OFF

### トラブルシューティング（LINE特化）

#### よくある問題と解決方法

**Q1: メンション（@FIND to DO）が反応しない**
- **原因**: セッション状態の混乱、または友だち登録不完全
- **対処**: 
  1. 「メニュー」コマンドでセッションリセット
  2. 友だち削除→再追加
  3. Webでアカウント連携確認

**Q2: AI分析結果が間違っている**
- **原因**: 自然言語処理の解釈エラー
- **対処**: 
  1. 🔧修正ボタンで手動修正
  2. より具体的なキーワードで再入力
  3. メニューから種類を先に選択

**Q3: 担当者が正しく認識されない**
- **原因**: ユーザー名とシステム登録名の不一致
- **対処**:
  1. Web設定でユーザー登録名を確認
  2. フルネームまたはユーザーIDで指定
  3. 手動で担当者選択UIを使用

**Q4: 詳細入力が途中で止まる**
- **原因**: セッションタイムアウト（30分）
- **対処**:
  1. 💾保存ボタンで部分保存
  2. メニューから該当データタイプを再選択
  3. 編集フィールドから継続

#### システム連携エラー対処

**データ同期不良の場合:**
1. **Web確認**: ダッシュボードでデータ反映を確認
2. **再送信**: 同じ内容を再度LINE送信
3. **手動作成**: 緊急時はWeb画面で直接作成

**通知不達の場合:**
1. **通知設定確認**: Web設定画面で設定状況確認
2. **LINE通知許可**: LINEアプリの通知設定確認
3. **友だち状態確認**: ブロック・削除されていないか確認

### LINE Bot運用のベストプラクティス

#### 効率的な使い方
1. **日常業務**: @メンションで素早くデータ登録
2. **詳細管理**: Webダッシュボードで進捗管理
3. **チーム連携**: 担当者指定で自動通知活用
4. **営業活動**: 営業キーワードでAI機能を最大活用

#### チーム導入時の注意点
1. **段階的導入**: 個人利用→チーム展開
2. **ユーザー教育**: メンション要件とセッション概念の理解
3. **設定統一**: チーム全体での通知設定調整
4. **定期確認**: 連携状態の定期チェック

**詳細なLINE操作リスト**: 「[LINE_USER_OPERATIONS_COMPLETE_LIST.md](../LINE_USER_OPERATIONS_COMPLETE_LIST.md)」参照

---

## Slack連携

### Slackワークスペースとの接続

#### 1. 連携の設定
1. 外部連携画面で「Slack」を選択
2. 「Slackに追加」ボタンをクリック
3. Slackの認証画面で権限を承認
4. 連携完了後、チャンネルを選択

#### 2. 通知チャンネルの設定
- **#general**: 全体のプロジェクト更新
- **#tasks**: タスク関連の通知
- **#alerts**: 期限切れ・重要アラート
- **#dev**: 開発関連の更新（GitHub連携時）

### Slackでの操作

#### スラッシュコマンド
- `/findtodo help`: 利用可能なコマンド一覧
- `/findtodo create [タスク名]`: 新規タスク作成
- `/findtodo list`: 自分のタスク一覧
- `/findtodo assign [@メンバー] [タスクID]`: タスクの割り当て

#### ボット通知の活用
- タスク作成時: 自動的に関連チャンネルに通知
- 期限間近: 1日前、当日に自動アラート
- 完了報告: プロジェクト進捗の自動更新

#### チーム協働機能
- **スレッド機能**: タスクに関する議論をスレッドで整理
- **リアクション**: 👍で承認、⏰で期限延長の提案
- **メンション**: @チームで関係者全員に通知

---

## Google サービス連携

### Google Calendar連携

#### 1. カレンダー連携の設定
1. 外部連携から「Google Calendar」を選択
2. Googleアカウントでログイン・認証
3. 連携するカレンダーを選択
4. 同期設定を完了

#### 2. タスクとカレンダーの同期
- **自動同期**: タスクの期限が自動的にカレンダーイベントとして追加
- **作業時間ブロック**: 集中作業時間をカレンダーに確保
- **ミーティング連携**: カレンダーのミーティングがタスクとして自動作成

#### 3. 予定の管理
- カレンダー上でタスクをドラッグ&ドロップで移動
- 期限変更が自動的にシステムに反映
- 重複する予定の自動検出とアラート

### Google Drive連携

#### ファイル管理の連携
1. 外部連携設定でGoogle Driveを有効化
2. プロジェクトフォルダを指定
3. タスクに関連するファイルを自動同期

#### 自動保存機能
- タスクで作成した文書を自動的にDriveに保存
- チーム共有フォルダへの自動配置
- バージョン管理の自動化

### Google Analytics連携

#### Webサイト解析との連動
1. Analytics アカウントを連携
2. プロジェクトに関連するサイトを設定
3. マーケティングタスクの効果測定を自動化

#### レポート自動生成
- 週次・月次レポートの自動作成
- KPI達成状況の自動評価
- 改善提案の自動生成

---

## 開発ツール連携

### GitHub連携

#### 1. リポジトリ連携
1. 外部連携から「GitHub」を選択
2. GitHubアカウントで認証
3. 連携するリポジトリを選択
4. Webhook設定を完了

#### 2. 自動タスク管理
- **Issue連携**: GitHubのIssueがタスクとして自動作成
- **PR管理**: プルリクエストの進捗をタスクで追跡
- **コミット連携**: コミットメッセージとタスクの自動紐付け

#### 3. 開発フローの自動化
- **ブランチ作成**: タスクから開発ブランチを自動生成
- **レビュー管理**: コードレビューの進捗をタスクで管理
- **デプロイ管理**: リリース作業をタスクとして自動化

### Trello連携

#### ボード同期機能
1. Trelloアカウントを連携
2. 同期するボードを選択
3. 双方向同期を設定

#### データ移行支援
- Trelloのカードを一括でタスクとしてインポート
- ラベル・メンバー情報の自動マッピング
- 既存データの重複チェック

---

## SNS・マーケティングツール連携

### Twitter/X連携

#### 1. アカウント連携
1. 外部連携設定でTwitterを選択
2. API認証を完了
3. 監視するキーワード・ハッシュタグを設定

#### 2. ソーシャルリスニング
- **キーワード監視**: 指定したキーワードのメンション自動収集
- **競合分析**: 競合他社の活動状況をトラッキング
- **トレンド分析**: 業界トレンドの自動レポート生成

#### 3. 投稿管理
- マーケティングタスクから投稿内容を直接予約
- 投稿効果の自動測定とレポート
- エンゲージメント データの収集・分析

### Facebook/Instagram連携

#### ビジネスアカウント管理
- 複数アカウントの一元管理
- 投稿スケジュールの自動化
- コメント・メッセージ対応タスクの自動生成

#### 広告キャンペーン管理
- 広告の効果測定データ自動取得
- ROI分析レポートの自動生成
- 予算管理とアラート機能

---

## データ連携・API機能

### 外部データの自動取り込み

#### 1. CSV/Excelデータインポート
1. データ連携画面で「ファイルインポート」を選択
2. CSVまたはExcelファイルをアップロード
3. データマッピングを設定：
   - タスク名 → 該当列を指定
   - 担当者 → メンバーとのマッピング
   - 期限 → 日付形式の設定

#### 2. 定期インポート設定
- **スケジュール設定**: 毎日、毎週、毎月の自動実行
- **データソース監視**: 指定フォルダの新規ファイルを自動検出
- **エラーハンドリング**: インポートエラー時の通知とログ

### API連携

#### Webhook設定
1. 外部連携設定で「Webhook」を選択
2. 受信するイベントを選択：
   - タスク作成・更新・削除
   - プロジェクト変更
   - メンバー追加・削除
3. 送信先URLを設定

#### REST API利用
- **認証**: APIキーまたはOAuth2認証
- **レート制限**: 1分間に60リクエストまで
- **データ形式**: JSON形式でのデータ交換

---

## セキュリティ・認証設定

### OAuth認証管理

#### 1. 連携サービスの認証状況確認
1. 設定画面の「外部連携」タブ
2. 「認証管理」セクションで各サービスの状況を確認：
   - ✅ 認証済み（緑色）
   - ⚠️ 期限切れ間近（黄色）
   - ❌ 認証エラー（赤色）

#### 2. 認証の更新・取り消し
- **更新**: 期限切れ前に自動更新または手動更新
- **取り消し**: 不要な連携の削除
- **再認証**: エラー時の認証やり直し

### データアクセス権限

#### 権限レベルの設定
- **読み取り専用**: データの閲覧のみ
- **書き込み可能**: データの作成・更新
- **管理者権限**: 設定変更・削除が可能

#### アクセスログの監視
- 外部連携による データアクセス履歴
- 異常なアクセスパターンの検出
- セキュリティアラートの自動発信

---

## トラブルシューティング

### よくある問題と解決方法

#### Q1: LINE Botが応答しない
**原因と対処法:**
- 連携が切れている
  → QRコードで再度友だち追加
- アカウント認証が無効
  → 「/setup」コマンドで再認証

#### Q2: Slack通知が届かない
**原因と対処法:**
- チャンネル設定が間違っている
  → 通知チャンネルの再設定
- Slackアプリの権限不足
  → ワークスペース管理者に権限確認を依頼

#### Q3: Google Calendar同期がうまくいかない
**原因と対処法:**
- カレンダーの共有設定が制限されている
  → カレンダー設定で共有権限を確認
- 認証トークンの期限切れ
  → Google連携の再認証を実行

#### Q4: GitHub連携でIssueが同期されない
**原因と対処法:**
- Webhookの設定が不完全
  → GitHubリポジトリのWebhook設定を確認
- APIレート制限に達している
  → 時間をおいて再試行

### 連携エラーの対処

#### エラーログの確認
1. 外部連携画面の「ログ」タブ
2. エラー内容と発生時刻を確認
3. 推奨される対処法に従って解決

#### 連携の再設定
1. 問題のある連携サービスを一旦削除
2. キャッシュをクリア
3. 最初から連携設定をやり直し

### パフォーマンス最適化

#### 同期頻度の調整
- リアルタイム同期 vs バッチ処理
- 業務時間外の処理集約
- 不要な同期の停止

#### データ量の管理
- 古いデータの自動アーカイブ
- 同期対象の絞り込み
- 定期的な連携設定の見直し

---

## まとめ

ソーシャル・外部連携システムを効果的に活用することで、以下の効果が期待できます：

### 期待効果
- **業務効率の大幅向上**: 手動作業の自動化
- **情報の一元管理**: 複数ツールのデータ統合
- **チーム協働の促進**: リアルタイム情報共有
- **意思決定の迅速化**: 最新データに基づく判断

### 成功のポイント
- **段階的な導入**: 一度に全ての連携を設定せず、必要な部分から開始
- **チーム教育**: メンバー全員が使い方を理解
- **定期的な見直し**: 連携設定の最適化
- **セキュリティ意識**: 認証・権限管理の徹底

適切な外部連携により、単一のプラットフォームで全ての業務を効率的に管理できるようになります。