# ナレッジ機能要件定義書（最終版）

**作成日**: 2025-06-15  
**基本方針**: プロジェクト中心型・操作コスト最小化・利益最大化

---

## 🎯 機能概要

### **ナレッジ機能の目的**
- **タスク完了経験** → **組織の智慧資産**への自動昇華
- **プロジェクト成功パターン** → **再現可能なテンプレート**化
- **操作コスト最小化**での智慧蓄積・活用システム

---

## 📊 ナレッジ昇華フロー

### **1. タスクナレッジ昇華**
```
タスク完了（[COMPLETE]へドラッグ）
     ↓
AI価値判定（自動実行）
     ↓
昇華提案表示「このタスクをナレッジ化しますか？」
     ↓
ワンクリック承認 → ナレッジ保存 → タスク削除
```

### **2. プロジェクトテンプレート昇華**
```
プロジェクト完了
     ↓
AI総合評価（成功度・再利用性・革新度）
     ↓
テンプレート化提案「このプロジェクトをテンプレート化しますか？」
     ↓
カテゴリ選択 → プロジェクトテンプレート保存
```

---

## 🤖 AI判定基準

### **タスクナレッジ価値判定**
- **複雑度**: 説明文の長さ（100文字以上+20点）、実行期間（3日以上+15点）
- **プロジェクト関連度**: プロジェクト紐づきあり（+30点）
- **優先度重み**: A=25点、B=20点、C=10点、D=5点
- **学習価値**: 作成から完了まで3日以上（+15点）
- **総合判定**: 60点以上で昇華提案

### **プロジェクトテンプレート価値判定**
- **成功度**: タスク完了率、期限内完了、品質達成
- **再利用性**: タスク構造の汎用性、チーム構成の標準性
- **革新度**: 新しい手法・プロセスの採用
- **総合判定**: 70点以上でテンプレート化提案

---

## 🎯 ナレッジ活用システム

### **メイン活用: プロジェクトテンプレート**

#### **新プロジェクト作成時**
```
プロジェクト名: [入力]
テンプレート: [ドロップダウン選択]
├─ なし（ゼロから作成）
├─ 案件受注系テンプレート
├─ イベント企画テンプレート
├─ インターンシップ提案テンプレート
├─ コミュニティ集客テンプレート
├─ サービスローンチテンプレート
├─ 開発テンプレート
└─ その他
```

#### **テンプレート適用で自動生成される要素**
- **📅 ガントチャート**: フェーズ構成・期間・依存関係
- **👥 タスク割り振り**: チーム構成・役割分担・アサイン
- **📞 アポフロー**: 営業戦略・調整スケジュール
- **📋 成果物リスト**: 必要な資料・成果物・品質基準

### **サブ活用: 関連ナレッジリンク**

#### **タスク登録時**
```
タスク名: [API連携実装          ]
説明: [外部APIとの連携機能を...    ]

                    💡 関連ナレッジ: API実装のコツ
                       📋 関連ナレッジ: エラーハンドリング手順
```

#### **アポ登録時**
```
相手: [田中部長（ABC商事）    ]
日時: [2025-06-20 14:00]

                    💡 関連ナレッジ: 初回商談のポイント
                       📞 類似アポ: XYZ社初回商談の成功例
```

---

## 📄 資料テンプレート機能

### **資料昇華フロー**
```
資料作成タスク完了
     ↓
AI判定「この資料はテンプレート価値があります」
     ↓
保存方式選択:
├─ 参考資料として保存（PDF/画像 → Googleドライブ）
└─ テンプレート化（React/Next.js → コンフィグ対応）
```

### **テンプレート構造**
- **Reactコンポーネント**: 資料のレイアウト・デザイン
- **コンフィグファイル**: 変更可能項目（日付、タイトル、会社名など）
- **PDF生成機能**: テンプレート + コンフィグ → 完成資料

---

## 🔗 アポ管理連携

### **アポフローナレッジ**
- **営業戦略パターン**: 初回→ヒアリング→提案→クロージング
- **成功率データ**: フロー別・業界別・期間別の成功確率
- **リスク・対策**: よくある失敗パターンと予防策

### **プロジェクトテンプレートでの活用**
```
「案件受注系テンプレート」選択時:
推奨アポフロー:
├─ 初回商談（プロジェクト開始後3日以内）
├─ 要件ヒアリング（初回から1週間以内）
├─ 提案プレゼン（ヒアリング後10日以内）
└─ クロージング（提案後1週間以内）
```

---

## 💾 データ構造要件

### **Knowledge テーブル拡張**
```sql
-- 既存フィールド + 以下追加
sourceTaskId: string?        -- タスクから昇華の場合
sourceProjectId: string?     -- プロジェクトテンプレート化の場合
knowledgeType: enum          -- TASK_UPGRADE | PROJECT_TEMPLATE | MANUAL
isProjectTemplate: boolean   -- プロジェクトテンプレートフラグ
templateData: JSON?          -- テンプレート構造データ
category: string?            -- 案件受注系、イベント企画系など
aiRelevanceScore: number     -- AI評価スコア
usageCount: number           -- 使用回数
lastUsedAt: DateTime?        -- 最終使用日時
```

### **資料管理**
```sql
-- 軽量化のためリンク管理
googleDriveFileId: string    -- Googleドライブファイル ID
reactComponentPath: string?  -- テンプレートコンポーネントパス
configPath: string?          -- コンフィグファイルパス
```

---

## 🚀 実装フェーズ

### **Phase 1: コア機能（2週間）**
- [ ] ナレッジテーブル拡張
- [ ] タスク→ナレッジ昇華API
- [ ] プロジェクト→テンプレート昇華API
- [ ] 基本的なAI判定エンジン
- [ ] プロジェクトテンプレート選択・適用機能

### **Phase 2: 活用機能（1週間）**
- [ ] 関連ナレッジリンク表示
- [ ] テンプレート一覧・検索
- [ ] 使用実績追跡
- [ ] ユーザーフィードバック収集

### **Phase 3: 高度化（2週間）**
- [ ] 資料テンプレート機能
- [ ] Googleドライブ連携
- [ ] AI判定精度向上
- [ ] アポフロー連携強化

---

## ✅ 成功指標

### **効率化指標**
- **プロジェクト立ち上げ時間**: 70%短縮目標
- **テンプレート使用率**: 新プロジェクトの50%以上
- **ナレッジ昇華率**: 完了タスクの30%以上

### **品質指標**
- **テンプレート満足度**: ユーザー評価4.0以上
- **成功率向上**: テンプレート使用プロジェクトの成功率向上
- **継続使用率**: 一度使用したユーザーの継続使用率80%以上

---

## ⚠️ 重要な設計原則

### **操作コスト最小化**
- テンプレート化は**副産物として自然発生**
- ユーザーが「テンプレート作る作業」をしない
- 全てワンクリック・ドラッグ&ドロップで完結

### **プロジェクト中心型**
- 個別タスクではなく**プロジェクト全体の智慧**を重視
- アポ管理・コネクション管理との自然な連携
- 組織の成功パターンを資産化

### **利益最大化**
- 過去の成功を再現可能にする
- 失敗パターンの事前回避
- 継続的な改善・学習サイクル

---

**この要件定義により、タスク管理ツールが「組織智慧プラットフォーム」へと進化し、継続的な生産性向上を実現します。**