# SNSåˆ†ææ©Ÿèƒ½ ãƒãƒ‹ãƒ¥ã‚¢ãƒ«

## æ¦‚è¦

SNSåˆ†ææ©Ÿèƒ½ã¯ã€AIé§†å‹•ã®ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢çµ±åˆåˆ†æã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚Twitterã€Instagramã€Discordçµ±åˆåˆ†æã€ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã€ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æã€ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæœ€é©åŒ–ã€ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ãªã©ã€åŒ…æ‹¬çš„ãªã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´ã‚’æä¾›ã—ã¾ã™ã€‚

### ä¸»è¦ç‰¹å¾´
- **ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çµ±åˆåˆ†æ**ï¼ˆTwitterã€Instagramã€Discordï¼‰
- **AI ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³**
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°**
- **ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åŠ¹æœæ¸¬å®š**
- **ãƒ–ãƒ©ãƒ³ãƒ‰è©•åˆ¤ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ **

---

## ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
2. [ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çµ±åˆ](#ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çµ±åˆ)
3. [ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ](#ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ)
4. [ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°](#ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°)
5. [ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æ](#ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æ)
6. [ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–æ©Ÿèƒ½](#ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–æ©Ÿèƒ½)
7. [ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–](#ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–)
8. [å®Ÿè£…ä¾‹](#å®Ÿè£…ä¾‹)
9. [AIæœ€é©åŒ–æ©Ÿèƒ½](#aiæœ€é©åŒ–æ©Ÿèƒ½)
10. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆ

```javascript
// SNSåˆ†æã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆ
const SocialAnalyticsArchitecture = {
  // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çµ±åˆ
  platformIntegrations: {
    twitter: 'TwitterAnalyticsService',
    instagram: 'InstagramAnalyticsService',
    discord: 'DiscordAnalyticsService',
    universal: 'UniversalSocialAnalyzer'
  },
  
  // åˆ†æã‚¨ãƒ³ã‚¸ãƒ³
  analysisEngines: {
    engagement: 'EngagementAnalyzer',
    sentiment: 'SentimentAnalysisEngine',
    influence: 'InfluencerAnalyzer',
    brand: 'BrandMonitoringEngine',
    content: 'ContentOptimizationEngine'
  },
  
  // UIãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  dashboardComponents: {
    socialDashboard: 'social-analytics/page.tsx',
    platformOverview: 'PlatformOverviewCards',
    engagementChart: 'EngagementTrendChart',
    sentimentMeter: 'SentimentMeter',
    influencerRanking: 'InfluencerRankingPanel',
    brandMonitor: 'BrandMonitoringDashboard'
  }
};

// SocialAnalyticsPage ã®ãƒ¡ã‚¤ãƒ³æ§‹é€ 
export default function SocialAnalyticsPage() {
  const {
    socialData,
    engagementMetrics,
    sentimentAnalysis,
    influencerData,
    brandMetrics,
    loading,
    error,
    refreshData,
    analyzeEngagement,
    updateSettings
  } = useSocialAnalytics();

  return (
    <div className="min-h-screen bg-gray-50">
      <SocialAnalyticsHeader />
      <PlatformSummaryCards data={socialData?.summary} />
      <SocialAnalyticsGrid 
        engagement={engagementMetrics}
        sentiment={sentimentAnalysis}
        influencer={influencerData}
        brand={brandMetrics}
      />
      <EngagementTrendChart data={engagementMetrics} />
      <SocialInsightsPanel insights={socialData?.insights} />
    </div>
  );
}
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```javascript
// SNSåˆ†æãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ç®¡ç†
const SocialDataFlow = {
  // ãƒ‡ãƒ¼ã‚¿åé›†
  dataCollection: {
    twitter: 'Twitter API v2 çµ±åˆ',
    instagram: 'Instagram Graph API',
    discord: 'Discord Bot API',
    webhooks: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ Webhookå—ä¿¡'
  },
  
  // åˆ†æå‡¦ç†
  analysisProcessing: {
    textAnalysis: 'ãƒ†ã‚­ã‚¹ãƒˆæ„Ÿæƒ…åˆ†æ',
    engagementCalculation: 'ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡è¨ˆç®—',
    influenceScoring: 'ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚¹åº¦ã‚¹ã‚³ã‚¢ç®—å‡º',
    trendDetection: 'ãƒˆãƒ¬ãƒ³ãƒ‰æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ',
    anomalyDetection: 'ç•°å¸¸å€¤æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ '
  },
  
  // çµæœé…ä¿¡
  resultDelivery: {
    dashboardUpdates: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°',
    alerts: 'ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆ',
    reports: 'SNSæˆæœãƒ¬ãƒãƒ¼ãƒˆ',
    recommendations: 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–ææ¡ˆ'
  }
};
```

---

## ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çµ±åˆ

### Twitter åˆ†æã‚µãƒ¼ãƒ“ã‚¹

```javascript
// Twitteråˆ†æã‚µãƒ¼ãƒ“ã‚¹
class TwitterAnalyticsService {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
    this.twitterClient = new TwitterClient();
  }

  async analyzeTwitterMetrics(accountId) {
    try {
      // Twitterãƒ‡ãƒ¼ã‚¿å–å¾—
      const twitterData = await this.getTwitterData(accountId);
      
      // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ
      const engagementAnalysis = await this.analyzeEngagement(twitterData);
      
      // ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
      const trendAnalysis = await this.analyzeTrends(twitterData);
      
      // AI ã‚¤ãƒ³ã‚µã‚¤ãƒˆç”Ÿæˆ
      const insights = await this.generateTwitterInsights(twitterData, engagementAnalysis);
      
      return {
        metrics: {
          followers: twitterData.followers,
          engagement: engagementAnalysis.overall,
          impressions: twitterData.impressions,
          clicks: twitterData.clicks
        },
        trends: trendAnalysis,
        insights,
        recommendations: insights.recommendations,
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('Twitteråˆ†æã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('Twitteråˆ†æã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async analyzeEngagement(twitterData) {
    const prompt = `
    ä»¥ä¸‹ã®Twitterãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ï¼š

    ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(twitterData.tweets.slice(0, 50), null, 2)}

    ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
    - ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°: ${twitterData.followers}
    - ç·ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³: ${twitterData.totalImpressions}
    - ç·ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ: ${twitterData.totalEngagements}
    - å¹³å‡ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡: ${twitterData.avgEngagementRate}%

    ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡ã®è©•ä¾¡
    2. é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ„ã‚¤ãƒ¼ãƒˆã®ç‰¹å¾´
    3. æŠ•ç¨¿æ™‚é–“åˆ¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
    4. ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°åŠ¹æœåˆ†æ
    5. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—åˆ¥åˆ†æ

    JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "overall": {
        "score": "ç·åˆã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰",
        "level": "ãƒ¬ãƒ™ãƒ«ï¼ˆä½/ä¸­/é«˜ï¼‰",
        "trend": "ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆæ”¹å–„/ç¶­æŒ/æ‚ªåŒ–ï¼‰"
      },
      "topPerformers": ["é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ„ã‚¤ãƒ¼ãƒˆã®ç‰¹å¾´"],
      "timeAnalysis": "æœ€é©æŠ•ç¨¿æ™‚é–“åˆ†æ",
      "hashtagEffects": "ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°åŠ¹æœåˆ†æ",
      "contentTypePerformance": "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹",
      "recommendations": ["æ”¹å–„ææ¡ˆ"]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }

  async getTwitterData(accountId) {
    // Twitter API v2 ã§ãƒ‡ãƒ¼ã‚¿å–å¾—
    const [
      userMetrics,
      tweets,
      analytics
    ] = await Promise.all([
      this.twitterClient.getUserMetrics(accountId),
      this.twitterClient.getRecentTweets(accountId, 100),
      this.twitterClient.getAnalytics(accountId)
    ]);

    return {
      followers: userMetrics.public_metrics.followers_count,
      following: userMetrics.public_metrics.following_count,
      tweets: tweets.data.map(tweet => ({
        id: tweet.id,
        text: tweet.text,
        created_at: tweet.created_at,
        public_metrics: tweet.public_metrics,
        context_annotations: tweet.context_annotations || []
      })),
      totalImpressions: analytics.impressions,
      totalEngagements: analytics.engagements,
      avgEngagementRate: (analytics.engagements / analytics.impressions * 100).toFixed(2)
    };
  }
}
```

### Instagram åˆ†æã‚µãƒ¼ãƒ“ã‚¹

```javascript
// Instagramåˆ†æã‚µãƒ¼ãƒ“ã‚¹
class InstagramAnalyticsService {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
    this.instagramClient = new InstagramClient();
  }

  async analyzeInstagramMetrics(accountId) {
    try {
      // Instagramãƒ‡ãƒ¼ã‚¿å–å¾—
      const instagramData = await this.getInstagramData(accountId);
      
      // ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æ
      const visualAnalysis = await this.analyzeVisualContent(instagramData);
      
      // ã‚¹ãƒˆãƒ¼ãƒªãƒ¼åˆ†æ
      const storyAnalysis = await this.analyzeStories(instagramData);
      
      // AI ã‚¤ãƒ³ã‚µã‚¤ãƒˆç”Ÿæˆ
      const insights = await this.generateInstagramInsights(instagramData, visualAnalysis);
      
      return {
        metrics: {
          followers: instagramData.followers,
          engagement: visualAnalysis.overall,
          reach: instagramData.reach,
          impressions: instagramData.impressions
        },
        visualAnalysis,
        storyAnalysis,
        insights,
        recommendations: insights.recommendations,
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('Instagramåˆ†æã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('Instagramåˆ†æã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async analyzeVisualContent(instagramData) {
    const prompt = `
    ä»¥ä¸‹ã®Instagramã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ï¼š

    æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(instagramData.posts.slice(0, 30), null, 2)}

    ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
    - ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°: ${instagramData.followers}
    - å¹³å‡ã„ã„ã­æ•°: ${instagramData.avgLikes}
    - å¹³å‡ã‚³ãƒ¡ãƒ³ãƒˆæ•°: ${instagramData.avgComments}
    - ãƒªãƒ¼ãƒç‡: ${instagramData.avgReachRate}%

    ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åŠ¹æœ
    2. è‰²å½©ãƒ»æ§‹å›³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
    3. ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ã¨ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã®ç›¸é–¢
    4. ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°æˆ¦ç•¥ã®åŠ¹æœ
    5. æŠ•ç¨¿å½¢å¼åˆ¥ï¼ˆå†™çœŸ/å‹•ç”»/ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ï¼‰ã®æ¯”è¼ƒ

    JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "overall": {
        "score": "ç·åˆã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰",
        "level": "ãƒ¬ãƒ™ãƒ«ï¼ˆä½/ä¸­/é«˜ï¼‰",
        "trend": "ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆæ”¹å–„/ç¶­æŒ/æ‚ªåŒ–ï¼‰"
      },
      "visualInsights": "ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«åˆ†æã®æ´å¯Ÿ",
      "colorAnalysis": "è‰²å½©åˆ†æçµæœ",
      "captionEffectiveness": "ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³åŠ¹æœåˆ†æ",
      "hashtagStrategy": "ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°æˆ¦ç•¥è©•ä¾¡",
      "formatPerformance": "æŠ•ç¨¿å½¢å¼åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹",
      "recommendations": ["æ”¹å–„ææ¡ˆ"]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }
}
```

### Discord åˆ†æã‚µãƒ¼ãƒ“ã‚¹

```javascript
// Discordåˆ†æã‚µãƒ¼ãƒ“ã‚¹
class DiscordAnalyticsService {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
    this.discordClient = new DiscordClient();
  }

  async analyzeDiscordCommunity(serverId) {
    try {
      // Discordãƒ‡ãƒ¼ã‚¿å–å¾—
      const discordData = await this.getDiscordData(serverId);
      
      // ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ´»å‹•åˆ†æ
      const communityAnalysis = await this.analyzeCommunityActivity(discordData);
      
      // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ
      const engagementAnalysis = await this.analyzeDiscordEngagement(discordData);
      
      // AI ã‚¤ãƒ³ã‚µã‚¤ãƒˆç”Ÿæˆ
      const insights = await this.generateDiscordInsights(discordData, communityAnalysis);
      
      return {
        metrics: {
          members: discordData.totalMembers,
          activeMembers: discordData.activeMembers,
          messageVolume: discordData.messageVolume,
          engagement: engagementAnalysis.overall
        },
        communityAnalysis,
        engagementAnalysis,
        insights,
        recommendations: insights.recommendations,
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('Discordåˆ†æã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('Discordåˆ†æã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async analyzeCommunityActivity(discordData) {
    const prompt = `
    ä»¥ä¸‹ã®Discordã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ´»å‹•ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ï¼š

    ã‚µãƒ¼ãƒãƒ¼æƒ…å ±:
    - ç·ãƒ¡ãƒ³ãƒãƒ¼æ•°: ${discordData.totalMembers}
    - ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¡ãƒ³ãƒãƒ¼: ${discordData.activeMembers}
    - ãƒãƒ£ãƒ³ãƒãƒ«æ•°: ${discordData.channels.length}

    æ´»å‹•ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(discordData.activityData, null, 2)}

    ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åˆ†æ:
    ${JSON.stringify(discordData.messageAnalysis, null, 2)}

    ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®å¥å…¨æ€§è©•ä¾¡
    2. ãƒ¡ãƒ³ãƒãƒ¼ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«
    3. ãƒãƒ£ãƒ³ãƒãƒ«åˆ¥æ´»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³
    4. æ™‚é–“å¸¯åˆ¥æ´»å‹•åˆ†æ
    5. ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æˆé•·ãƒšãƒ¼ã‚¹

    JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "healthScore": "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å¥å…¨æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰",
      "engagementLevel": "ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ï¼ˆä½/ä¸­/é«˜ï¼‰",
      "channelPerformance": "ãƒãƒ£ãƒ³ãƒãƒ«åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ",
      "activityPatterns": "æ´»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ",
      "growthAnalysis": "æˆé•·åˆ†æ",
      "recommendations": ["æ”¹å–„ææ¡ˆ"]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }
}
```

### çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```javascript
// ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çµ±åˆè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
export function PlatformOverviewCards({ socialData }) {
  const platforms = ['twitter', 'instagram', 'discord'];

  return (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      {platforms.map((platform) => (
        <Card key={platform} className="p-6">
          <div className="flex items-center justify-between mb-4">
            <div className="flex items-center space-x-2">
              <PlatformIcon platform={platform} className="w-6 h-6" />
              <h3 className="text-lg font-semibold capitalize">{platform}</h3>
            </div>
            <Badge variant={getPerformanceBadgeVariant(socialData[platform]?.performance)}>
              {socialData[platform]?.performance || 'N/A'}
            </Badge>
          </div>

          <div className="space-y-3">
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼</span>
              <span className="font-medium">
                {formatNumber(socialData[platform]?.followers)}
              </span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡</span>
              <span className="font-medium">
                {socialData[platform]?.engagementRate}%
              </span>
            </div>
            <div className="flex justify-between">
              <span className="text-sm text-gray-600">ä»Šæœˆã®æˆé•·</span>
              <span className={`font-medium ${
                socialData[platform]?.growth >= 0 ? 'text-green-600' : 'text-red-600'
              }`}>
                {socialData[platform]?.growth >= 0 ? '+' : ''}
                {socialData[platform]?.growth}%
              </span>
            </div>
          </div>

          <div className="mt-4 pt-3 border-t">
            <div className="flex items-center justify-between">
              <span className="text-xs text-gray-500">æœ€çµ‚æ›´æ–°</span>
              <Button variant="outline" size="sm">
                è©³ç´°è¡¨ç¤º
              </Button>
            </div>
          </div>
        </Card>
      ))}
    </div>
  );
}
```

---

## ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ

### ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æã‚¨ãƒ³ã‚¸ãƒ³

```javascript
// ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æã‚¨ãƒ³ã‚¸ãƒ³
class EngagementAnalyzer {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
  }

  async analyzeMultiPlatformEngagement(platformsData) {
    try {
      // å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®çµ±åˆåˆ†æ
      const crossPlatformAnalysis = await this.performCrossPlatformAnalysis(platformsData);
      
      // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæœ€é©åŒ–ææ¡ˆ
      const optimizationSuggestions = await this.generateOptimizationSuggestions(crossPlatformAnalysis);
      
      // ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹åˆ†æ
      const audienceInsights = await this.analyzeAudienceEngagement(platformsData);
      
      return {
        crossPlatformMetrics: crossPlatformAnalysis.metrics,
        engagementTrends: crossPlatformAnalysis.trends,
        optimizationSuggestions,
        audienceInsights,
        recommendations: optimizationSuggestions.recommendations,
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async performCrossPlatformAnalysis(platformsData) {
    const prompt = `
    ä»¥ä¸‹ã®ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€çµ±åˆã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

    Twitter ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(platformsData.twitter, null, 2)}

    Instagram ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(platformsData.instagram, null, 2)}

    Discord ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(platformsData.discord, null, 2)}

    ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–“ã®ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæ¯”è¼ƒ
    2. ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹ã®é‡è¤‡ãƒ»å›ºæœ‰æ€§åˆ†æ
    3. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—åˆ¥ã®åŠ¹æœåˆ†æ
    4. æ™‚é–“è»¸ã§ã®ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é€£æºåŠ¹æœ
    5. çµ±åˆæˆ¦ç•¥ã®æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ

    JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "metrics": {
        "overallEngagement": "çµ±åˆã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡",
        "platformComparison": "ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥æ¯”è¼ƒ",
        "audienceOverlap": "ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹é‡è¤‡åˆ†æ"
      },
      "trends": {
        "engagementTrend": "ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒˆãƒ¬ãƒ³ãƒ‰",
        "platformGrowth": "ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥æˆé•·",
        "seasonality": "å­£ç¯€æ€§åˆ†æ"
      },
      "insights": ["é‡è¦ãªæ´å¯Ÿ"],
      "opportunities": ["æ”¹å–„æ©Ÿä¼š"]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }
}
```

### ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒ£ãƒ¼ãƒˆ

```javascript
// ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒˆãƒ¬ãƒ³ãƒ‰è¡¨ç¤º
export function EngagementTrendChart({ engagementData }) {
  const [timeRange, setTimeRange] = React.useState('7d');
  const [platforms, setPlatforms] = React.useState(['twitter', 'instagram', 'discord']);

  const chartData = React.useMemo(() => {
    return engagementData?.trends?.filter(item => 
      platforms.includes(item.platform)
    ) || [];
  }, [engagementData, platforms]);

  return (
    <Card className="p-6">
      <div className="flex items-center justify-between mb-6">
        <h3 className="text-lg font-semibold">ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒˆãƒ¬ãƒ³ãƒ‰</h3>
        <div className="flex items-center space-x-2">
          <Select value={timeRange} onValueChange={setTimeRange}>
            <SelectTrigger className="w-24">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="24h">24æ™‚é–“</SelectItem>
              <SelectItem value="7d">7æ—¥é–“</SelectItem>
              <SelectItem value="30d">30æ—¥é–“</SelectItem>
              <SelectItem value="90d">90æ—¥é–“</SelectItem>
            </SelectContent>
          </Select>
          <Button size="sm" variant="outline">
            ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
          </Button>
        </div>
      </div>

      {/* ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é¸æŠ */}
      <div className="flex items-center space-x-4 mb-4">
        <span className="text-sm font-medium">è¡¨ç¤ºãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ :</span>
        {['twitter', 'instagram', 'discord'].map((platform) => (
          <label key={platform} className="flex items-center space-x-2">
            <input
              type="checkbox"
              checked={platforms.includes(platform)}
              onChange={(e) => {
                if (e.target.checked) {
                  setPlatforms([...platforms, platform]);
                } else {
                  setPlatforms(platforms.filter(p => p !== platform));
                }
              }}
              className="rounded"
            />
            <span className="text-sm capitalize">{platform}</span>
            <div className={`w-3 h-3 rounded-full bg-${getPlatformColor(platform)}-500`} />
          </label>
        ))}
      </div>

      {/* ãƒãƒ£ãƒ¼ãƒˆ */}
      <div className="h-80">
        <ResponsiveContainer width="100%" height="100%">
          <LineChart data={chartData}>
            <CartesianGrid strokeDasharray="3 3" />
            <XAxis 
              dataKey="date" 
              tickFormatter={(date) => format(new Date(date), 'MM/dd')}
            />
            <YAxis 
              label={{ value: 'ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡ (%)', angle: -90, position: 'insideLeft' }}
            />
            <Tooltip 
              labelFormatter={(date) => format(new Date(date), 'yyyy/MM/dd HH:mm')}
              formatter={(value, name) => [`${value}%`, name]}
            />
            <Legend />
            {platforms.map((platform) => (
              <Line
                key={platform}
                type="monotone"
                dataKey={`${platform}_engagement`}
                stroke={getPlatformColor(platform, 'hex')}
                strokeWidth={2}
                dot={{ r: 3 }}
                name={platform.charAt(0).toUpperCase() + platform.slice(1)}
              />
            ))}
          </LineChart>
        </ResponsiveContainer>
      </div>

      {/* ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã‚µãƒãƒªãƒ¼ */}
      <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="p-3 bg-blue-50 rounded-lg">
          <div className="text-sm font-medium text-blue-800">å¹³å‡ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡</div>
          <div className="text-xl font-bold text-blue-900">
            {engagementData?.summary?.averageEngagement}%
          </div>
          <div className="text-xs text-blue-600">
            å‰æœŸæ¯”: {engagementData?.summary?.engagementChange >= 0 ? '+' : ''}
            {engagementData?.summary?.engagementChange}%
          </div>
        </div>
        <div className="p-3 bg-green-50 rounded-lg">
          <div className="text-sm font-medium text-green-800">æœ€é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</div>
          <div className="text-xl font-bold text-green-900">
            {engagementData?.summary?.bestPlatform}
          </div>
          <div className="text-xs text-green-600">
            {engagementData?.summary?.bestEngagement}% ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ
          </div>
        </div>
        <div className="p-3 bg-purple-50 rounded-lg">
          <div className="text-sm font-medium text-purple-800">æ”¹å–„æ©Ÿä¼š</div>
          <div className="text-xl font-bold text-purple-900">
            {engagementData?.summary?.improvementPlatform}
          </div>
          <div className="text-xs text-purple-600">
            +{engagementData?.summary?.improvementPotential}% ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«
          </div>
        </div>
      </div>
    </Card>
  );
}
```

---

## ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³

```javascript
// ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³
class SocialListeningEngine {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
    this.keywords = [];
    this.platforms = ['twitter', 'instagram', 'reddit', 'youtube'];
  }

  async startSocialListening(keywords, options = {}) {
    try {
      // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¨­å®š
      this.keywords = keywords;
      
      // ãƒªã‚¹ãƒ‹ãƒ³ã‚°é–‹å§‹
      const listeningResults = await this.performSocialListening(keywords, options);
      
      // æ„Ÿæƒ…åˆ†æ
      const sentimentAnalysis = await this.analyzeSentiment(listeningResults);
      
      // ãƒˆãƒ¬ãƒ³ãƒ‰æ¤œå‡º
      const trendAnalysis = await this.detectTrends(listeningResults);
      
      // ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆ
      const alerts = await this.generateAlerts(listeningResults, sentimentAnalysis);
      
      return {
        mentions: listeningResults.mentions,
        sentiment: sentimentAnalysis,
        trends: trendAnalysis,
        alerts,
        insights: await this.generateListeningInsights(listeningResults, sentimentAnalysis),
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async performSocialListening(keywords, options) {
    const mentions = [];
    
    // å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
    for (const platform of this.platforms) {
      const platformMentions = await this.searchPlatform(platform, keywords, options);
      mentions.push(...platformMentions);
    }
    
    return {
      mentions: mentions.sort((a, b) => new Date(b.created_at) - new Date(a.created_at)),
      totalMentions: mentions.length,
      platformBreakdown: this.calculatePlatformBreakdown(mentions),
      timeRange: options.timeRange || '24h'
    };
  }

  async analyzeSentiment(listeningResults) {
    const prompt = `
    ä»¥ä¸‹ã®ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚’åˆ†æã—ã€æ„Ÿæƒ…åˆ†æã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

    ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ•°: ${listeningResults.totalMentions}
    ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†å¸ƒ: ${JSON.stringify(listeningResults.platformBreakdown)}

    ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚µãƒ³ãƒ—ãƒ«:
    ${JSON.stringify(listeningResults.mentions.slice(0, 50), null, 2)}

    ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. å…¨ä½“çš„ãªæ„Ÿæƒ…å‚¾å‘ï¼ˆãƒã‚¸ãƒ†ã‚£ãƒ–/ãƒã‚¬ãƒ†ã‚£ãƒ–/ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ï¼‰
    2. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥æ„Ÿæƒ…åˆ†æ
    3. æ™‚é–“è»¸ã§ã®æ„Ÿæƒ…å¤‰åŒ–
    4. ä¸»è¦ãªãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ»ãƒã‚¬ãƒ†ã‚£ãƒ–è¦å› 
    5. ç·Šæ€¥å¯¾å¿œãŒå¿…è¦ãªå•é¡Œ

    JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "overall": {
        "positive": "ãƒã‚¸ãƒ†ã‚£ãƒ–å‰²åˆï¼ˆ%ï¼‰",
        "negative": "ãƒã‚¬ãƒ†ã‚£ãƒ–å‰²åˆï¼ˆ%ï¼‰",
        "neutral": "ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«å‰²åˆï¼ˆ%ï¼‰",
        "score": "æ„Ÿæƒ…ã‚¹ã‚³ã‚¢ï¼ˆ-100ï½100ï¼‰"
      },
      "platformSentiment": "ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥æ„Ÿæƒ…åˆ†æ",
      "timelineSentiment": "æ™‚ç³»åˆ—æ„Ÿæƒ…å¤‰åŒ–",
      "keyThemes": {
        "positive": ["ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ†ãƒ¼ãƒ"],
        "negative": ["ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ†ãƒ¼ãƒ"]
      },
      "urgentIssues": ["ç·Šæ€¥å¯¾å¿œèª²é¡Œ"],
      "opportunities": ["æ©Ÿä¼šãƒ»ãƒãƒ£ãƒ³ã‚¹"]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }

  async detectTrends(listeningResults) {
    // ãƒˆãƒ¬ãƒ³ãƒ‰æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
    const trends = await this.identifyEmergingTrends(listeningResults.mentions);
    
    return {
      emergingTrends: trends.emerging,
      decliningTrends: trends.declining,
      stableTrends: trends.stable,
      viralContent: trends.viral,
      trendingHashtags: trends.hashtags
    };
  }
}
```

### ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```javascript
// ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
export function SocialListeningDashboard() {
  const [listeningData, setListeningData] = React.useState(null);
  const [keywords, setKeywords] = React.useState(['ãƒ–ãƒ©ãƒ³ãƒ‰å', 'ç«¶åˆ']);
  const [isListening, setIsListening] = React.useState(false);
  const [loading, setLoading] = React.useState(false);

  const startListening = async () => {
    try {
      setLoading(true);
      setIsListening(true);
      
      const response = await fetch('/api/social/listening', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
          keywords,
          options: { timeRange: '24h', includeSentiment: true }
        })
      });
      
      const data = await response.json();
      setListeningData(data);
      
    } catch (error) {
      console.error('ãƒªã‚¹ãƒ‹ãƒ³ã‚°é–‹å§‹ã‚¨ãƒ©ãƒ¼:', error);
    } finally {
      setLoading(false);
    }
  };

  const stopListening = () => {
    setIsListening(false);
  };

  return (
    <div className="space-y-6">
      {/* ãƒªã‚¹ãƒ‹ãƒ³ã‚°è¨­å®š */}
      <Card className="p-6">
        <div className="flex items-center justify-between mb-4">
          <h3 className="text-lg font-semibold">ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°</h3>
          <div className="flex items-center space-x-2">
            <Badge variant={isListening ? "default" : "secondary"}>
              {isListening ? 'ãƒªã‚¹ãƒ‹ãƒ³ã‚°ä¸­' : 'åœæ­¢ä¸­'}
            </Badge>
            {isListening ? (
              <Button onClick={stopListening} variant="destructive" size="sm">
                åœæ­¢
              </Button>
            ) : (
              <Button onClick={startListening} disabled={loading} size="sm">
                {loading ? 'Starting...' : 'é–‹å§‹'}
              </Button>
            )}
          </div>
        </div>

        {/* ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¨­å®š */}
        <div className="space-y-2">
          <label className="text-sm font-medium">ç›£è¦–ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
          <div className="flex flex-wrap gap-2">
            {keywords.map((keyword, index) => (
              <Badge key={index} variant="outline" className="px-2 py-1">
                {keyword}
                <button
                  onClick={() => setKeywords(keywords.filter((_, i) => i !== index))}
                  className="ml-1 text-red-500 hover:text-red-700"
                >
                  Ã—
                </button>
              </Badge>
            ))}
            <Button
              variant="outline"
              size="sm"
              onClick={() => {
                const newKeyword = prompt('æ–°ã—ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
                if (newKeyword) setKeywords([...keywords, newKeyword]);
              }}
            >
              + è¿½åŠ 
            </Button>
          </div>
        </div>
      </Card>

      {listeningData && (
        <>
          {/* æ„Ÿæƒ…åˆ†æã‚µãƒãƒªãƒ¼ */}
          <Card className="p-6">
            <h4 className="text-lg font-semibold mb-4">æ„Ÿæƒ…åˆ†æ</h4>
            <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
              <div className="text-center p-3 bg-green-50 rounded-lg">
                <div className="text-2xl font-bold text-green-700">
                  {listeningData.sentiment.overall.positive}%
                </div>
                <div className="text-sm text-green-600">ãƒã‚¸ãƒ†ã‚£ãƒ–</div>
              </div>
              <div className="text-center p-3 bg-red-50 rounded-lg">
                <div className="text-2xl font-bold text-red-700">
                  {listeningData.sentiment.overall.negative}%
                </div>
                <div className="text-sm text-red-600">ãƒã‚¬ãƒ†ã‚£ãƒ–</div>
              </div>
              <div className="text-center p-3 bg-gray-50 rounded-lg">
                <div className="text-2xl font-bold text-gray-700">
                  {listeningData.sentiment.overall.neutral}%
                </div>
                <div className="text-sm text-gray-600">ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«</div>
              </div>
              <div className="text-center p-3 bg-blue-50 rounded-lg">
                <div className="text-2xl font-bold text-blue-700">
                  {listeningData.sentiment.overall.score}
                </div>
                <div className="text-sm text-blue-600">æ„Ÿæƒ…ã‚¹ã‚³ã‚¢</div>
              </div>
            </div>

            {/* æ„Ÿæƒ…ãƒ¡ãƒ¼ã‚¿ãƒ¼ */}
            <div className="mb-4">
              <div className="flex items-center justify-between mb-2">
                <span className="text-sm font-medium">æ„Ÿæƒ…ãƒãƒ©ãƒ³ã‚¹</span>
                <span className="text-sm text-gray-500">
                  ç·ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ•°: {listeningData.mentions.length}
                </span>
              </div>
              <div className="h-4 bg-red-200 rounded-full overflow-hidden">
                <div 
                  className="h-full bg-green-500 transition-all duration-500"
                  style={{ 
                    width: `${listeningData.sentiment.overall.positive}%` 
                  }}
                />
              </div>
            </div>
          </Card>

          {/* ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ä¸€è¦§ */}
          <Card className="p-6">
            <h4 className="text-lg font-semibold mb-4">æœ€æ–°ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³</h4>
            <div className="space-y-3 max-h-96 overflow-y-auto">
              {listeningData.mentions.slice(0, 20).map((mention, index) => (
                <div 
                  key={index} 
                  className="p-3 border rounded-lg hover:bg-gray-50"
                >
                  <div className="flex items-center justify-between mb-2">
                    <div className="flex items-center space-x-2">
                      <PlatformIcon platform={mention.platform} className="w-4 h-4" />
                      <span className="text-sm font-medium">{mention.author}</span>
                      <Badge 
                        variant={getSentimentVariant(mention.sentiment)}
                        className="text-xs"
                      >
                        {mention.sentiment}
                      </Badge>
                    </div>
                    <span className="text-xs text-gray-500">
                      {formatDistanceToNow(new Date(mention.created_at))}å‰
                    </span>
                  </div>
                  <p className="text-sm text-gray-700 mb-2">{mention.text}</p>
                  <div className="flex items-center justify-between text-xs text-gray-500">
                    <div className="flex items-center space-x-3">
                      <span>ğŸ‘ {mention.likes || 0}</span>
                      <span>ğŸ”„ {mention.retweets || 0}</span>
                      <span>ğŸ’¬ {mention.replies || 0}</span>
                    </div>
                    <a 
                      href={mention.url} 
                      target="_blank" 
                      rel="noopener noreferrer"
                      className="text-blue-500 hover:underline"
                    >
                      å…ƒæŠ•ç¨¿ã‚’è¦‹ã‚‹
                    </a>
                  </div>
                </div>
              ))}
            </div>
          </Card>

          {/* ã‚¢ãƒ©ãƒ¼ãƒˆ */}
          {listeningData.alerts.length > 0 && (
            <Card className="p-6 border-red-200 bg-red-50">
              <h4 className="text-lg font-semibold text-red-800 mb-4">
                ç·Šæ€¥ã‚¢ãƒ©ãƒ¼ãƒˆ
              </h4>
              <div className="space-y-2">
                {listeningData.alerts.map((alert, index) => (
                  <div key={index} className="flex items-center text-red-700">
                    <AlertTriangle className="w-4 h-4 mr-2" />
                    <span className="text-sm">{alert.message}</span>
                  </div>
                ))}
              </div>
            </Card>
          )}
        </>
      )}
    </div>
  );
}
```

---

## ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æ

### ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æã‚¨ãƒ³ã‚¸ãƒ³

```javascript
// ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æã‚¨ãƒ³ã‚¸ãƒ³
class InfluencerAnalyzer {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
  }

  async analyzeInfluencers(campaignData) {
    try {
      // ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»åˆ†æ
      const influencerData = await this.getInfluencerData(campaignData.influencers);
      
      // åŠ¹æœæ¸¬å®š
      const effectAnalysis = await this.measureInfluencerEffect(influencerData);
      
      // ROIåˆ†æ
      const roiAnalysis = await this.calculateInfluencerROI(influencerData, campaignData);
      
      // æ¨å¥¨ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ææ¡ˆ
      const recommendations = await this.generateInfluencerRecommendations(effectAnalysis);
      
      return {
        influencerMetrics: effectAnalysis.metrics,
        campaignPerformance: effectAnalysis.performance,
        roiAnalysis,
        recommendations,
        topPerformers: effectAnalysis.topPerformers,
        insights: await this.generateInfluencerInsights(effectAnalysis),
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async measureInfluencerEffect(influencerData) {
    const prompt = `
    ä»¥ä¸‹ã®ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€åŠ¹æœæ¸¬å®šã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

    ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(influencerData, null, 2)}

    ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ
    2. ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡ã®è³ªçš„åˆ†æ
    3. ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹ã®è³ªãƒ»é©åˆæ€§è©•ä¾¡
    4. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åŠ¹æœæ€§åˆ†æ
    5. ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¼é”åŠ¹æœ

    JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "metrics": {
        "totalReach": "ç·ãƒªãƒ¼ãƒæ•°",
        "avgEngagementRate": "å¹³å‡ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡",
        "qualityScore": "ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹å“è³ªã‚¹ã‚³ã‚¢"
      },
      "performance": {
        "topPerformers": ["ãƒˆãƒƒãƒ—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ¼"],
        "underPerformers": ["æ”¹å–„ãŒå¿…è¦ãªã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼"],
        "contentAnalysis": "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŠ¹æœåˆ†æ"
      },
      "audienceInsights": "ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹åˆ†æã®æ´å¯Ÿ",
      "recommendations": ["æ”¹å–„ææ¡ˆ"]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }

  async calculateInfluencerROI(influencerData, campaignData) {
    const totalInvestment = campaignData.budget;
    const totalRevenue = campaignData.attributedRevenue || 0;
    const directROI = ((totalRevenue - totalInvestment) / totalInvestment) * 100;

    // ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ¥ROIè¨ˆç®—
    const influencerROI = influencerData.map(influencer => {
      const investment = influencer.cost;
      const revenue = influencer.attributedRevenue || 0;
      const roi = ((revenue - investment) / investment) * 100;
      
      return {
        name: influencer.name,
        investment,
        revenue,
        roi,
        costPerEngagement: investment / (influencer.engagements || 1),
        costPerReach: investment / (influencer.reach || 1)
      };
    });

    return {
      campaign: {
        totalInvestment,
        totalRevenue,
        directROI,
        paybackPeriod: totalInvestment / (totalRevenue / 30) // æœˆé–“å£²ä¸ŠåŸºæº–
      },
      influencers: influencerROI,
      insights: {
        bestROI: influencerROI.reduce((best, current) => 
          current.roi > best.roi ? current : best
        ),
        mostCostEffective: influencerROI.reduce((best, current) => 
          current.costPerEngagement < best.costPerEngagement ? current : best
        )
      }
    };
  }
}
```

### ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‘ãƒãƒ«

```javascript
// ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
export function InfluencerRankingPanel({ influencerData }) {
  const [sortBy, setSortBy] = React.useState('roi');
  const [filterBy, setFilterBy] = React.useState('all');

  const sortedInfluencers = React.useMemo(() => {
    if (!influencerData?.influencers) return [];
    
    let filtered = influencerData.influencers;
    if (filterBy !== 'all') {
      filtered = filtered.filter(inf => inf.category === filterBy);
    }
    
    return filtered.sort((a, b) => {
      switch (sortBy) {
        case 'roi': return b.roi - a.roi;
        case 'engagement': return b.engagementRate - a.engagementRate;
        case 'reach': return b.reach - a.reach;
        case 'cost': return a.costPerEngagement - b.costPerEngagement;
        default: return 0;
      }
    });
  }, [influencerData, sortBy, filterBy]);

  return (
    <Card className="p-6">
      <div className="flex items-center justify-between mb-6">
        <h3 className="text-lg font-semibold">ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h3>
        <div className="flex items-center space-x-2">
          <Select value={sortBy} onValueChange={setSortBy}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="roi">ROIé †</SelectItem>
              <SelectItem value="engagement">ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆé †</SelectItem>
              <SelectItem value="reach">ãƒªãƒ¼ãƒé †</SelectItem>
              <SelectItem value="cost">ã‚³ã‚¹ãƒˆåŠ¹ç‡é †</SelectItem>
            </SelectContent>
          </Select>
          <Select value={filterBy} onValueChange={setFilterBy}>
            <SelectTrigger className="w-32">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="all">å…¨ä½“</SelectItem>
              <SelectItem value="micro">ãƒã‚¤ã‚¯ãƒ­</SelectItem>
              <SelectItem value="macro">ãƒã‚¯ãƒ­</SelectItem>
              <SelectItem value="mega">ãƒ¡ã‚¬</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>

      <div className="space-y-3">
        {sortedInfluencers.map((influencer, index) => (
          <div
            key={influencer.id}
            className="p-4 border rounded-lg hover:shadow-md transition-shadow"
          >
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-3">
                <div className="relative">
                  <img
                    src={influencer.profileImage}
                    alt={influencer.name}
                    className="w-12 h-12 rounded-full"
                  />
                  <div className="absolute -top-1 -right-1">
                    <Badge variant="secondary" className="text-xs px-1">
                      #{index + 1}
                    </Badge>
                  </div>
                </div>
                <div>
                  <div className="font-medium">{influencer.name}</div>
                  <div className="text-sm text-gray-500">
                    @{influencer.username} â€¢ {influencer.category}
                  </div>
                  <div className="flex items-center space-x-3 text-xs text-gray-600">
                    <span>ğŸ‘¥ {formatNumber(influencer.followers)}</span>
                    <span>ğŸ“Š {influencer.engagementRate}%</span>
                    <span>ğŸ“ˆ {formatNumber(influencer.reach)}</span>
                  </div>
                </div>
              </div>

              <div className="text-right">
                <div className="flex items-center space-x-4">
                  <div>
                    <div className="text-sm text-gray-600">ROI</div>
                    <div className={`font-bold ${
                      influencer.roi >= 0 ? 'text-green-600' : 'text-red-600'
                    }`}>
                      {influencer.roi >= 0 ? '+' : ''}{influencer.roi.toFixed(1)}%
                    </div>
                  </div>
                  <div>
                    <div className="text-sm text-gray-600">ã‚³ã‚¹ãƒˆ/ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ</div>
                    <div className="font-bold">
                      Â¥{influencer.costPerEngagement.toFixed(0)}
                    </div>
                  </div>
                  <div>
                    <div className="text-sm text-gray-600">ç·æŠ•è³‡</div>
                    <div className="font-bold">
                      Â¥{formatNumber(influencer.investment)}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è©³ç´° */}
            <div className="mt-3 pt-3 border-t">
              <div className="grid grid-cols-4 gap-4 text-sm">
                <div>
                  <span className="text-gray-600">æŠ•ç¨¿æ•°: </span>
                  <span className="font-medium">{influencer.posts}</span>
                </div>
                <div>
                  <span className="text-gray-600">å¹³å‡ã„ã„ã­: </span>
                  <span className="font-medium">{formatNumber(influencer.avgLikes)}</span>
                </div>
                <div>
                  <span className="text-gray-600">å¹³å‡ã‚³ãƒ¡ãƒ³ãƒˆ: </span>
                  <span className="font-medium">{formatNumber(influencer.avgComments)}</span>
                </div>
                <div>
                  <span className="text-gray-600">å£²ä¸Šè²¢çŒ®: </span>
                  <span className="font-medium">Â¥{formatNumber(influencer.attributedRevenue)}</span>
                </div>
              </div>
              
              {/* æœ€è¿‘ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ¬ãƒ³ãƒ‰ */}
              <div className="mt-2 flex items-center justify-between">
                <div className="flex items-center space-x-2 text-xs">
                  <span className="text-gray-600">æœ€è¿‘ã®ãƒˆãƒ¬ãƒ³ãƒ‰:</span>
                  {influencer.trend === 'up' ? (
                    <span className="text-green-600 flex items-center">
                      <TrendingUp className="w-3 h-3 mr-1" />
                      ä¸Šæ˜‡ä¸­
                    </span>
                  ) : (
                    <span className="text-red-600 flex items-center">
                      <TrendingDown className="w-3 h-3 mr-1" />
                      ä¸‹é™ä¸­
                    </span>
                  )}
                </div>
                <Button size="sm" variant="outline">
                  è©³ç´°åˆ†æ
                </Button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </Card>
  );
}
```

---

## ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–æ©Ÿèƒ½

### ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ã‚¨ãƒ³ã‚¸ãƒ³

```javascript
// ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ã‚¨ãƒ³ã‚¸ãƒ³
class BrandMonitoringEngine {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
    this.monitoringKeywords = [];
    this.alertThresholds = {
      sentiment: -30,    // ãƒã‚¬ãƒ†ã‚£ãƒ–æ„Ÿæƒ…ãŒ30%ä»¥ä¸‹ã§è­¦å‘Š
      volume: 5.0,       // é€šå¸¸ã®5å€ã®ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³é‡ã§è­¦å‘Š
      viral: 1000        // 1æ™‚é–“ã§1000ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ä»¥ä¸Šã§è­¦å‘Š
    };
  }

  async monitorBrandReputation(brandConfig) {
    try {
      // ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å–å¾—
      const brandMentions = await this.getBrandMentions(brandConfig);
      
      // è©•åˆ¤åˆ†æ
      const reputationAnalysis = await this.analyzeReputation(brandMentions);
      
      // ç«¶åˆæ¯”è¼ƒ
      const competitorAnalysis = await this.analyzeCompetitors(brandConfig.competitors);
      
      // ã‚¯ãƒ©ã‚¤ã‚·ã‚¹æ¤œå‡º
      const crisisAnalysis = await this.detectCrisis(brandMentions, reputationAnalysis);
      
      // ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆ
      const alerts = await this.generateBrandAlerts(reputationAnalysis, crisisAnalysis);
      
      return {
        reputation: reputationAnalysis,
        competitors: competitorAnalysis,
        crisis: crisisAnalysis,
        alerts,
        recommendations: await this.generateReputationRecommendations(reputationAnalysis),
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async analyzeReputation(brandMentions) {
    const prompt = `
    ä»¥ä¸‹ã®ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ãƒ–ãƒ©ãƒ³ãƒ‰è©•åˆ¤ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ï¼š

    ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(brandMentions.mentions.slice(0, 100), null, 2)}

    ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
    - ç·ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ•°: ${brandMentions.totalMentions}
    - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†å¸ƒ: ${JSON.stringify(brandMentions.platformBreakdown)}
    - æ™‚é–“åˆ¥åˆ†å¸ƒ: ${JSON.stringify(brandMentions.timeBreakdown)}

    ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. ãƒ–ãƒ©ãƒ³ãƒ‰è©•åˆ¤ã®å…¨ä½“çš„è©•ä¾¡
    2. æ„Ÿæƒ…åˆ†æã®è©³ç´°
    3. ä¸»è¦ãªè©±é¡Œãƒ»ãƒ†ãƒ¼ãƒåˆ†æ
    4. ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ»ãƒã‚¬ãƒ†ã‚£ãƒ–è¦å› ã®ç‰¹å®š
    5. ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å¤‰åŒ–ãƒˆãƒ¬ãƒ³ãƒ‰

    JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "overallScore": "ç·åˆè©•åˆ¤ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰",
      "sentiment": {
        "positive": "ãƒã‚¸ãƒ†ã‚£ãƒ–å‰²åˆï¼ˆ%ï¼‰",
        "negative": "ãƒã‚¬ãƒ†ã‚£ãƒ–å‰²åˆï¼ˆ%ï¼‰",
        "neutral": "ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«å‰²åˆï¼ˆ%ï¼‰"
      },
      "keyThemes": {
        "positive": ["ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ†ãƒ¼ãƒ"],
        "negative": ["ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ†ãƒ¼ãƒ"],
        "neutral": ["ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ãƒ†ãƒ¼ãƒ"]
      },
      "brandAttributes": ["èªè­˜ã•ã‚Œã¦ã„ã‚‹ãƒ–ãƒ©ãƒ³ãƒ‰å±æ€§"],
      "trendAnalysis": "ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ",
      "riskFactors": ["ãƒªã‚¹ã‚¯è¦å› "],
      "opportunities": ["æ©Ÿä¼šãƒ»ãƒãƒ£ãƒ³ã‚¹"]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }

  async detectCrisis(brandMentions, reputationAnalysis) {
    // ã‚¯ãƒ©ã‚¤ã‚·ã‚¹æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
    const crisisIndicators = [];
    
    // æ„Ÿæƒ…ã‚¹ã‚³ã‚¢æ€¥é™ä¸‹æ¤œå‡º
    if (reputationAnalysis.sentiment.negative > 60) {
      crisisIndicators.push({
        type: 'sentiment_crisis',
        severity: 'high',
        description: 'ãƒã‚¬ãƒ†ã‚£ãƒ–æ„Ÿæƒ…ãŒæ€¥å¢—ã—ã¦ã„ã¾ã™',
        affectedPlatforms: this.identifyNegativePlatforms(brandMentions)
      });
    }
    
    // ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³é‡æ€¥å¢—æ¤œå‡º
    const volumeSpike = this.detectVolumeSpike(brandMentions.timeBreakdown);
    if (volumeSpike.detected) {
      crisisIndicators.push({
        type: 'volume_spike',
        severity: volumeSpike.severity,
        description: `ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³é‡ãŒ${volumeSpike.increase}å€ã«æ€¥å¢—ã—ã¦ã„ã¾ã™`,
        timeframe: volumeSpike.timeframe
      });
    }
    
    return {
      crisisDetected: crisisIndicators.length > 0,
      severity: this.calculateCrisisSeverity(crisisIndicators),
      indicators: crisisIndicators,
      recommendedActions: await this.generateCrisisActions(crisisIndicators)
    };
  }
}
```

### ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```javascript
// ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
export function BrandMonitoringDashboard() {
  const [brandData, setBrandData] = React.useState(null);
  const [alertLevel, setAlertLevel] = React.useState('normal');
  const [loading, setLoading] = React.useState(true);

  React.useEffect(() => {
    loadBrandData();
    
    // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°è¨­å®š
    const interval = setInterval(loadBrandData, 300000); // 5åˆ†æ¯
    return () => clearInterval(interval);
  }, []);

  const loadBrandData = async () => {
    try {
      const response = await fetch('/api/social/brand-monitoring');
      const data = await response.json();
      setBrandData(data);
      setAlertLevel(determineAlertLevel(data));
    } catch (error) {
      console.error('ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return <LoadingSpinner />;
  }

  return (
    <div className="space-y-6">
      {/* ã‚¢ãƒ©ãƒ¼ãƒˆãƒãƒŠãƒ¼ */}
      {alertLevel !== 'normal' && (
        <Alert className={`border ${getAlertBorderColor(alertLevel)}`}>
          <AlertTriangle className="h-4 w-4" />
          <AlertTitle>ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆ</AlertTitle>
          <AlertDescription>
            {getAlertMessage(alertLevel, brandData)}
          </AlertDescription>
        </Alert>
      )}

      {/* ãƒ–ãƒ©ãƒ³ãƒ‰è©•åˆ¤ã‚µãƒãƒªãƒ¼ */}
      <Card className="p-6">
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-lg font-semibold">ãƒ–ãƒ©ãƒ³ãƒ‰è©•åˆ¤ã‚¹ã‚³ã‚¢</h3>
          <Badge variant={getReputationBadgeVariant(brandData.reputation.overallScore)}>
            {brandData.reputation.overallScore}/100
          </Badge>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
          <div className="text-center p-4 bg-green-50 rounded-lg">
            <div className="text-2xl font-bold text-green-700">
              {brandData.reputation.sentiment.positive}%
            </div>
            <div className="text-sm text-green-600">ãƒã‚¸ãƒ†ã‚£ãƒ–</div>
          </div>
          <div className="text-center p-4 bg-red-50 rounded-lg">
            <div className="text-2xl font-bold text-red-700">
              {brandData.reputation.sentiment.negative}%
            </div>
            <div className="text-sm text-red-600">ãƒã‚¬ãƒ†ã‚£ãƒ–</div>
          </div>
          <div className="text-center p-4 bg-gray-50 rounded-lg">
            <div className="text-2xl font-bold text-gray-700">
              {brandData.reputation.sentiment.neutral}%
            </div>
            <div className="text-sm text-gray-600">ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«</div>
          </div>
          <div className="text-center p-4 bg-blue-50 rounded-lg">
            <div className="text-2xl font-bold text-blue-700">
              {brandData.totalMentions}
            </div>
            <div className="text-sm text-blue-600">ç·ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ•°</div>
          </div>
        </div>

        {/* è©•åˆ¤ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒ£ãƒ¼ãƒˆ */}
        <div className="h-64">
          <ResponsiveContainer width="100%" height="100%">
            <LineChart data={brandData.reputationTrend}>
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="date" />
              <YAxis domain={[0, 100]} />
              <Tooltip />
              <Line 
                type="monotone" 
                dataKey="score" 
                stroke="#3B82F6" 
                strokeWidth={2}
                name="è©•åˆ¤ã‚¹ã‚³ã‚¢"
              />
            </LineChart>
          </ResponsiveContainer>
        </div>
      </Card>

      {/* ä¸»è¦ãƒ†ãƒ¼ãƒåˆ†æ */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <Card className="p-6">
          <h4 className="text-lg font-semibold mb-4 text-green-700">
            ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ†ãƒ¼ãƒ
          </h4>
          <div className="space-y-2">
            {brandData.reputation.keyThemes.positive.map((theme, index) => (
              <div key={index} className="flex items-center justify-between p-2 bg-green-50 rounded">
                <span className="text-sm">{theme.topic}</span>
                <Badge variant="outline" className="text-green-700">
                  {theme.mentions}ä»¶
                </Badge>
              </div>
            ))}
          </div>
        </Card>

        <Card className="p-6">
          <h4 className="text-lg font-semibold mb-4 text-red-700">
            ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ†ãƒ¼ãƒ
          </h4>
          <div className="space-y-2">
            {brandData.reputation.keyThemes.negative.map((theme, index) => (
              <div key={index} className="flex items-center justify-between p-2 bg-red-50 rounded">
                <span className="text-sm">{theme.topic}</span>
                <Badge variant="outline" className="text-red-700">
                  {theme.mentions}ä»¶
                </Badge>
              </div>
            ))}
          </div>
        </Card>
      </div>

      {/* ç«¶åˆæ¯”è¼ƒ */}
      <Card className="p-6">
        <h4 className="text-lg font-semibold mb-4">ç«¶åˆãƒ–ãƒ©ãƒ³ãƒ‰æ¯”è¼ƒ</h4>
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead>
              <tr className="border-b">
                <th className="text-left p-2">ãƒ–ãƒ©ãƒ³ãƒ‰</th>
                <th className="text-center p-2">è©•åˆ¤ã‚¹ã‚³ã‚¢</th>
                <th className="text-center p-2">ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ•°</th>
                <th className="text-center p-2">ãƒã‚¸ãƒ†ã‚£ãƒ–ç‡</th>
                <th className="text-center p-2">ãƒˆãƒ¬ãƒ³ãƒ‰</th>
              </tr>
            </thead>
            <tbody>
              {brandData.competitors.map((competitor, index) => (
                <tr key={index} className="border-b hover:bg-gray-50">
                  <td className="p-2 font-medium">{competitor.name}</td>
                  <td className="p-2 text-center">
                    <Badge variant={getReputationBadgeVariant(competitor.score)}>
                      {competitor.score}
                    </Badge>
                  </td>
                  <td className="p-2 text-center">{competitor.mentions}</td>
                  <td className="p-2 text-center">{competitor.positiveRate}%</td>
                  <td className="p-2 text-center">
                    {competitor.trend === 'up' ? 'ğŸ“ˆ' : 'ğŸ“‰'}
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </Card>

      {/* æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ */}
      <Card className="p-6">
        <h4 className="text-lg font-semibold mb-4">æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h4>
        <div className="space-y-3">
          {brandData.recommendations.map((rec, index) => (
            <div key={index} className="flex items-start space-x-3 p-3 bg-blue-50 rounded-lg">
              <Lightbulb className="w-5 h-5 text-blue-600 mt-0.5" />
              <div>
                <div className="font-medium text-blue-800">{rec.title}</div>
                <div className="text-sm text-blue-700">{rec.description}</div>
                <div className="text-xs text-blue-600 mt-1">
                  å„ªå…ˆåº¦: {rec.priority} | æœŸå¾…åŠ¹æœ: {rec.expectedImpact}
                </div>
              </div>
            </div>
          ))}
        </div>
      </Card>
    </div>
  );
}
```

---

## ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–

### AI ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³

```javascript
// ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³
class ContentOptimizationEngine {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
  }

  async optimizeContent(contentData, targetPlatform) {
    try {
      // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æ
      const contentAnalysis = await this.analyzeContent(contentData);
      
      // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æœ€é©åŒ–
      const platformOptimization = await this.optimizeForPlatform(contentData, targetPlatform);
      
      // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæœ€é©åŒ–
      const engagementOptimization = await this.optimizeForEngagement(contentAnalysis);
      
      // æŠ•ç¨¿æ™‚é–“æœ€é©åŒ–
      const timingOptimization = await this.optimizePostTiming(targetPlatform);
      
      return {
        originalContent: contentData,
        optimizedContent: platformOptimization,
        improvements: engagementOptimization,
        timing: timingOptimization,
        expectedImpact: await this.calculateExpectedImpact(contentAnalysis, platformOptimization),
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–ã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async analyzeContent(contentData) {
    const prompt = `
    ä»¥ä¸‹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åˆ†æã—ã€æœ€é©åŒ–ã®ãŸã‚ã®è©•ä¾¡ã‚’è¡Œã£ã¦ãã ã•ã„ï¼š

    ã‚³ãƒ³ãƒ†ãƒ³ãƒ„:
    - ãƒ†ã‚­ã‚¹ãƒˆ: ${contentData.text}
    - ç”»åƒ: ${contentData.hasImage}
    - å‹•ç”»: ${contentData.hasVideo}
    - ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°: ${contentData.hashtags?.join(', ')}
    - ãƒªãƒ³ã‚¯: ${contentData.hasLink}

    ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é­…åŠ›åº¦ãƒ»è¨´æ±‚åŠ›
    2. ãƒ†ã‚­ã‚¹ãƒˆã®èª­ã¿ã‚„ã™ã•ãƒ»ç†è§£ã—ã‚„ã™ã•
    3. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¦ç´ ã®åŠ¹æœæ€§
    4. ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã®é©åˆ‡æ€§ãƒ»åŠ¹æœæ€§
    5. è¡Œå‹•å–šèµ·ï¼ˆCTAï¼‰ã®æ˜ç¢ºã•

    JSONå½¢å¼ã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "appealScore": "é­…åŠ›åº¦ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰",
      "readabilityScore": "èª­ã¿ã‚„ã™ã•ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰",
      "visualEffectiveness": "ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«åŠ¹æœè©•ä¾¡",
      "hashtagAnalysis": "ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°åˆ†æ",
      "ctaAnalysis": "CTAåˆ†æ",
      "strengths": ["å¼·ã¿"],
      "weaknesses": ["æ”¹å–„ç‚¹"],
      "suggestions": ["å…·ä½“çš„æ”¹å–„ææ¡ˆ"]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }

  async optimizeForPlatform(contentData, platform) {
    const prompt = `
    ä»¥ä¸‹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’${platform}ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å‘ã‘ã«æœ€é©åŒ–ã—ã¦ãã ã•ã„ï¼š

    å…ƒã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„:
    ${JSON.stringify(contentData, null, 2)}

    ${platform}ã®ç‰¹å¾´ã‚’è€ƒæ…®ã—ã¦æœ€é©åŒ–ã—ã¦ãã ã•ã„ï¼š
    - æ–‡å­—æ•°åˆ¶é™ã‚„æ¨å¥¨é•·
    - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰ã®æ©Ÿèƒ½
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³
    - ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæœ€é©åŒ–è¦ç´ 

    æœ€é©åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’JSONå½¢å¼ã§ææ¡ˆã—ã¦ãã ã•ã„ï¼š
    {
      "optimizedText": "æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆ",
      "recommendedHashtags": ["æ¨å¥¨ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°"],
      "visualRecommendations": "ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«æ¨å¥¨äº‹é …",
      "postingStrategy": "æŠ•ç¨¿æˆ¦ç•¥",
      "expectedEngagement": "æœŸå¾…ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæ”¹å–„ç‡ï¼ˆ%ï¼‰",
      "optimizationReasons": ["æœ€é©åŒ–ã®ç†ç”±ãƒ»æ ¹æ‹ "]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }
}
```

### ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–ãƒ„ãƒ¼ãƒ«

```javascript
// ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–ãƒ„ãƒ¼ãƒ«
export function ContentOptimizationTool() {
  const [content, setContent] = React.useState('');
  const [selectedPlatform, setSelectedPlatform] = React.useState('twitter');
  const [optimizationResult, setOptimizationResult] = React.useState(null);
  const [loading, setLoading] = React.useState(false);

  const optimizeContent = async () => {
    if (!content.trim()) return;
    
    try {
      setLoading(true);
      
      const response = await fetch('/api/social/content-optimization', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          content: {
            text: content,
            hasImage: false, // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ç”»åƒæ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ 
            hasVideo: false,
            hashtags: extractHashtags(content),
            hasLink: content.includes('http')
          },
          platform: selectedPlatform
        })
      });
      
      const result = await response.json();
      setOptimizationResult(result);
      
    } catch (error) {
      console.error('æœ€é©åŒ–ã‚¨ãƒ©ãƒ¼:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="space-y-6">
      <Card className="p-6">
        <h3 className="text-lg font-semibold mb-4">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–ãƒ„ãƒ¼ãƒ«</h3>
        
        {/* ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é¸æŠ */}
        <div className="mb-4">
          <label className="block text-sm font-medium mb-2">
            ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
          </label>
          <Select value={selectedPlatform} onValueChange={setSelectedPlatform}>
            <SelectTrigger className="w-40">
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="twitter">Twitter</SelectItem>
              <SelectItem value="instagram">Instagram</SelectItem>
              <SelectItem value="discord">Discord</SelectItem>
              <SelectItem value="linkedin">LinkedIn</SelectItem>
            </SelectContent>
          </Select>
        </div>

        {/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¥åŠ› */}
        <div className="mb-4">
          <label className="block text-sm font-medium mb-2">
            ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
          </label>
          <Textarea
            value={content}
            onChange={(e) => setContent(e.target.value)}
            placeholder="æœ€é©åŒ–ã—ãŸã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."
            rows={4}
            className="w-full"
          />
          <div className="flex justify-between items-center mt-2 text-sm text-gray-500">
            <span>{content.length} æ–‡å­—</span>
            <span>ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°: {extractHashtags(content).length}å€‹</span>
          </div>
        </div>

        <Button 
          onClick={optimizeContent} 
          disabled={!content.trim() || loading}
          className="w-full"
        >
          {loading ? 'Optimizing...' : 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æœ€é©åŒ–'}
        </Button>
      </Card>

      {optimizationResult && (
        <div className="space-y-4">
          {/* æœ€é©åŒ–çµæœã‚µãƒãƒªãƒ¼ */}
          <Card className="p-6">
            <h4 className="text-lg font-semibold mb-4">æœ€é©åŒ–çµæœ</h4>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
              <div className="p-3 bg-blue-50 rounded-lg text-center">
                <div className="text-2xl font-bold text-blue-700">
                  +{optimizationResult.expectedImpact.engagementImprovement}%
                </div>
                <div className="text-sm text-blue-600">æœŸå¾…ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆå‘ä¸Š</div>
              </div>
              <div className="p-3 bg-green-50 rounded-lg text-center">
                <div className="text-2xl font-bold text-green-700">
                  {optimizationResult.improvements.appealScore}
                </div>
                <div className="text-sm text-green-600">é­…åŠ›åº¦ã‚¹ã‚³ã‚¢</div>
              </div>
              <div className="p-3 bg-purple-50 rounded-lg text-center">
                <div className="text-2xl font-bold text-purple-700">
                  {optimizationResult.improvements.readabilityScore}
                </div>
                <div className="text-sm text-purple-600">èª­ã¿ã‚„ã™ã•ã‚¹ã‚³ã‚¢</div>
              </div>
            </div>
          </Card>

          {/* Before/Afteræ¯”è¼ƒ */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <Card className="p-6">
              <h5 className="font-semibold mb-3 text-gray-700">å…ƒã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h5>
              <div className="p-3 bg-gray-50 rounded border">
                <p className="text-sm">{optimizationResult.originalContent.text}</p>
              </div>
              <div className="mt-2 text-xs text-gray-500">
                æ–‡å­—æ•°: {optimizationResult.originalContent.text.length}
              </div>
            </Card>

            <Card className="p-6">
              <h5 className="font-semibold mb-3 text-green-700">æœ€é©åŒ–ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h5>
              <div className="p-3 bg-green-50 rounded border">
                <p className="text-sm">{optimizationResult.optimizedContent.optimizedText}</p>
              </div>
              <div className="mt-2 text-xs text-green-600">
                æ–‡å­—æ•°: {optimizationResult.optimizedContent.optimizedText.length}
              </div>
            </Card>
          </div>

          {/* æ¨å¥¨äº‹é … */}
          <Card className="p-6">
            <h5 className="font-semibold mb-3">AIæ¨å¥¨äº‹é …</h5>
            <div className="space-y-3">
              {optimizationResult.improvements.suggestions.map((suggestion, index) => (
                <div key={index} className="flex items-start space-x-2">
                  <Lightbulb className="w-4 h-4 text-yellow-500 mt-1" />
                  <span className="text-sm">{suggestion}</span>
                </div>
              ))}
            </div>
          </Card>

          {/* ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°æ¨å¥¨ */}
          <Card className="p-6">
            <h5 className="font-semibold mb-3">æ¨å¥¨ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°</h5>
            <div className="flex flex-wrap gap-2">
              {optimizationResult.optimizedContent.recommendedHashtags.map((hashtag, index) => (
                <Badge key={index} variant="outline" className="cursor-pointer hover:bg-blue-50">
                  #{hashtag}
                </Badge>
              ))}
            </div>
          </Card>

          {/* æŠ•ç¨¿ã‚¿ã‚¤ãƒŸãƒ³ã‚° */}
          <Card className="p-6">
            <h5 className="font-semibold mb-3">æœ€é©æŠ•ç¨¿ã‚¿ã‚¤ãƒŸãƒ³ã‚°</h5>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <h6 className="text-sm font-medium mb-2">æ¨å¥¨æŠ•ç¨¿æ™‚é–“</h6>
                <ul className="text-sm space-y-1">
                  {optimizationResult.timing.recommendedTimes.map((time, index) => (
                    <li key={index} className="flex items-center">
                      <Clock className="w-3 h-3 mr-1" />
                      {time.time} ({time.reason})
                    </li>
                  ))}
                </ul>
              </div>
              <div>
                <h6 className="text-sm font-medium mb-2">é¿ã‘ã‚‹ã¹ãæ™‚é–“</h6>
                <ul className="text-sm space-y-1">
                  {optimizationResult.timing.avoidTimes.map((time, index) => (
                    <li key={index} className="flex items-center text-red-600">
                      <X className="w-3 h-3 mr-1" />
                      {time.time} ({time.reason})
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          </Card>
        </div>
      )}
    </div>
  );
}
```

---

## å®Ÿè£…ä¾‹

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…

```javascript
// /api/social/analytics/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { TwitterAnalyticsService } from '@/services/TwitterAnalyticsService';
import { InstagramAnalyticsService } from '@/services/InstagramAnalyticsService';
import { DiscordAnalyticsService } from '@/services/DiscordAnalyticsService';
import { EngagementAnalyzer } from '@/services/EngagementAnalyzer';

export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const platforms = searchParams.get('platforms')?.split(',') || ['twitter', 'instagram', 'discord'];
    
    // å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®åˆ†æã‚’ä¸¦åˆ—å®Ÿè¡Œ
    const analyticsPromises = platforms.map(async (platform) => {
      switch (platform) {
        case 'twitter':
          return { 
            platform, 
            data: await new TwitterAnalyticsService(googleAI).analyzeTwitterMetrics('account_id')
          };
        case 'instagram':
          return { 
            platform, 
            data: await new InstagramAnalyticsService(googleAI).analyzeInstagramMetrics('account_id')
          };
        case 'discord':
          return { 
            platform, 
            data: await new DiscordAnalyticsService(googleAI).analyzeDiscordCommunity('server_id')
          };
        default:
          return null;
      }
    });

    const platformResults = await Promise.all(analyticsPromises);
    const platformData = platformResults.filter(result => result !== null)
      .reduce((acc, result) => {
        acc[result.platform] = result.data;
        return acc;
      }, {});

    // çµ±åˆã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ
    const engagementAnalysis = await new EngagementAnalyzer(googleAI)
      .analyzeMultiPlatformEngagement(platformData);

    return NextResponse.json({
      platforms: platformData,
      engagement: engagementAnalysis,
      summary: {
        totalFollowers: Object.values(platformData).reduce((sum, data) => sum + data.metrics.followers, 0),
        avgEngagementRate: Object.values(platformData).reduce((sum, data) => sum + data.metrics.engagement, 0) / platforms.length,
        totalReach: Object.values(platformData).reduce((sum, data) => sum + (data.metrics.reach || 0), 0)
      },
      timestamp: new Date().toISOString()
    });

  } catch (error) {
    console.error('SNSåˆ†æAPI ã‚¨ãƒ©ãƒ¼:', error);
    return NextResponse.json(
      { error: 'SNSåˆ†æã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' },
      { status: 500 }
    );
  }
}
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯å®Ÿè£…

```javascript
// hooks/useSocialAnalytics.ts
import { useState, useEffect, useCallback } from 'react';

export function useSocialAnalytics() {
  const [socialData, setSocialData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  const loadSocialData = useCallback(async () => {
    try {
      setLoading(true);
      const response = await fetch('/api/social/analytics');
      
      if (!response.ok) {
        throw new Error('SNSåˆ†æãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
      
      const data = await response.json();
      setSocialData(data);
      setError(null);
      
    } catch (err) {
      setError(err.message);
      console.error('SNSåˆ†æãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:', err);
    } finally {
      setLoading(false);
    }
  }, []);

  const refreshData = useCallback(() => {
    loadSocialData();
  }, [loadSocialData]);

  useEffect(() => {
    loadSocialData();
    
    // 5åˆ†æ¯ã®è‡ªå‹•æ›´æ–°
    const interval = setInterval(loadSocialData, 300000);
    return () => clearInterval(interval);
  }, [loadSocialData]);

  return {
    socialData,
    engagementMetrics: socialData?.engagement,
    loading,
    error,
    refreshData
  };
}
```

---

## AIæœ€é©åŒ–æ©Ÿèƒ½

### æ©Ÿæ¢°å­¦ç¿’çµ±åˆ

```javascript
// AIçµ±åˆSNSåˆ†æã‚·ã‚¹ãƒ†ãƒ 
class AISocialAnalyticsIntegration {
  constructor(googleAI) {
    this.ai = googleAI;
    this.model = 'gemini-1.5-flash';
  }

  async performComprehensiveSocialAnalysis(socialData) {
    try {
      // å…¨ãƒ‡ãƒ¼ã‚¿çµ±åˆåˆ†æ
      const comprehensiveInsights = await this.generateComprehensiveInsights(socialData);
      
      // æˆ¦ç•¥çš„æ¨å¥¨äº‹é …ç”Ÿæˆ
      const strategicRecommendations = await this.generateStrategicRecommendations(comprehensiveInsights);
      
      // äºˆæ¸¬åˆ†æ
      const predictions = await this.generateSocialPredictions(socialData);
      
      return {
        insights: comprehensiveInsights,
        recommendations: strategicRecommendations,
        predictions,
        actionPlan: await this.generateActionPlan(strategicRecommendations),
        updatedAt: new Date()
      };
      
    } catch (error) {
      console.error('AIçµ±åˆåˆ†æã‚¨ãƒ©ãƒ¼:', error);
      throw new Error('AIçµ±åˆåˆ†æã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  }

  async generateComprehensiveInsights(socialData) {
    const prompt = `
    ä»¥ä¸‹ã®åŒ…æ‹¬çš„ãªSNSãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€çµ±åˆçš„ãªæ´å¯Ÿã‚’æä¾›ã—ã¦ãã ã•ã„ï¼š

    ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(socialData.platforms, null, 2)}

    ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ:
    ${JSON.stringify(socialData.engagement, null, 2)}

    ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–ãƒ‡ãƒ¼ã‚¿:
    ${JSON.stringify(socialData.brandMonitoring, null, 2)}

    ä»¥ä¸‹ã®çµ±åˆåˆ†æã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š
    1. ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æˆ¦ç•¥ã®è©•ä¾¡
    2. ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆ†æ
    3. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŠ¹æœã®ç·åˆè©•ä¾¡
    4. ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹ã®å¸‚å ´ãƒã‚¸ã‚·ãƒ§ãƒ³
    5. ç«¶åˆä»–ç¤¾ã¨ã®å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆ

    JSONå½¢å¼ã§è©³ç´°ã«å›ç­”ã—ã¦ãã ã•ã„ï¼š
    {
      "overallPerformance": "å…¨ä½“ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è©•ä¾¡",
      "crossPlatformInsights": ["ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ´å¯Ÿ"],
      "audienceProfile": "çµ±åˆã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹åˆ†æ",
      "contentEffectiveness": "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŠ¹æœåˆ†æ",
      "competitivePosition": "ç«¶åˆãƒã‚¸ã‚·ãƒ§ãƒ³åˆ†æ",
      "strategicOpportunities": ["æˆ¦ç•¥çš„æ©Ÿä¼š"],
      "riskFactors": ["ãƒªã‚¹ã‚¯è¦å› "]
    }
    `;

    const result = await this.ai.generateContent(prompt);
    return JSON.parse(result.response.text());
  }
}
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

```javascript
// SNSåˆ†æãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
const SocialAnalyticsTroubleshooting = {
  // APIé€£æºã®å•é¡Œ
  apiConnectionIssues: {
    'rate_limit_exceeded': {
      description: 'APIåˆ©ç”¨åˆ¶é™ã«é”ã—ã¾ã—ãŸ',
      causes: [
        'Twitter APIåˆ©ç”¨åˆ¶é™',
        'Instagram APIåˆ©ç”¨åˆ¶é™',
        'çŸ­æ™‚é–“ã§ã®å¤§é‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ'
      ],
      solutions: [
        'ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–“éš”ã®èª¿æ•´',
        'ãƒãƒƒã‚¯ã‚ªãƒ•æˆ¦ç•¥ã®å®Ÿè£…',
        'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ APIã®æ¤œè¨'
      ]
    },
    'authentication_failed': {
      description: 'APIèªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ',
      causes: [
        'ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®æœŸé™åˆ‡ã‚Œ',
        'API ã‚­ãƒ¼ã®è¨­å®šãƒŸã‚¹',
        'ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¨©é™ä¸è¶³'
      ],
      solutions: [
        'ãƒˆãƒ¼ã‚¯ãƒ³ã®æ›´æ–°ãƒ»å†å–å¾—',
        'APIè¨­å®šã®ç¢ºèª',
        'ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¨©é™ã®è¦‹ç›´ã—'
      ]
    }
  },

  // ãƒ‡ãƒ¼ã‚¿å“è³ªã®å•é¡Œ
  dataQualityIssues: {
    'incomplete_data': {
      description: 'ãƒ‡ãƒ¼ã‚¿ãŒä¸å®Œå…¨ã§ã™',
      solutions: [
        'ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ç¢ºèª',
        'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®åˆ©ç”¨',
        'ãƒ‡ãƒ¼ã‚¿è£œå®Œã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®é©ç”¨'
      ]
    },
    'sentiment_accuracy': {
      description: 'æ„Ÿæƒ…åˆ†æã®ç²¾åº¦ãŒä½ã„',
      solutions: [
        'AI ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®èª¿æ•´',
        'æ¥­ç•Œç‰¹åŒ–ç”¨èªã®å­¦ç¿’',
        'äººé–“ã«ã‚ˆã‚‹æ¤œè¨¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯'
      ]
    }
  }
};

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°é–¢æ•°
export function handleSocialAnalyticsError(error, context) {
  console.error(`SNSåˆ†æã‚¨ãƒ©ãƒ¼ [${context}]:`, error);
  
  switch (error.type) {
    case 'RATE_LIMIT':
      return {
        message: 'APIåˆ©ç”¨åˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚',
        action: 'retry_later',
        retryAfter: error.retryAfter || 900000 // 15åˆ†
      };
      
    case 'AUTH_ERROR':
      return {
        message: 'APIèªè¨¼ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚',
        action: 'check_credentials'
      };
      
    case 'DATA_ERROR':
      return {
        message: 'ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚',
        action: 'check_connection'
      };
      
    default:
      return {
        message: 'äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚',
        action: 'contact_support'
      };
  }
}
```

---

## ã¾ã¨ã‚

ã“ã®SNSåˆ†ææ©Ÿèƒ½ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§ã¯ã€AIé§†å‹•ã®ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢çµ±åˆåˆ†æã‚·ã‚¹ãƒ†ãƒ ã®åŒ…æ‹¬çš„ãªå®Ÿè£…æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã—ãŸã€‚

### ä¸»è¦æ©Ÿèƒ½
1. **ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çµ±åˆ** - Twitterã€Instagramã€Discord ã®çµ±åˆåˆ†æ
2. **ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆåˆ†æ** - AI ã«ã‚ˆã‚‹é«˜åº¦ãªã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæœ€é©åŒ–
3. **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªã‚¹ãƒ‹ãƒ³ã‚°** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–
4. **ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼åˆ†æ** - ROI ä¸­å¿ƒã®åŠ¹æœæ¸¬å®š
5. **ãƒ–ãƒ©ãƒ³ãƒ‰ç›£è¦–æ©Ÿèƒ½** - ã‚¯ãƒ©ã‚¤ã‚·ã‚¹æ¤œå‡ºãƒ»è©•åˆ¤ç®¡ç†
6. **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æœ€é©åŒ–** - AI ã«ã‚ˆã‚‹æŠ•ç¨¿æœ€é©åŒ–

### æŠ€è¡“çš„ç‰¹å¾´
- Google Generative AI ã¨ã®çµ±åˆ
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å‡¦ç†
- æ„Ÿæƒ…åˆ†æãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰æ¤œå‡º
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ¯”è¼ƒåˆ†æ
- è‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€SNSãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã®åŠ¹ç‡åŒ–ã¨åŠ¹æœæœ€å¤§åŒ–ãŒå®Ÿç¾ã§ãã¾ã™ã€‚