# ğŸ“‹ Phase 1: å³åŠ¹æ€§æ©Ÿèƒ½å®Ÿè£… è©³ç´°è¨ˆç”»æ›¸

## ğŸ¯ Phase 1 æ¦‚è¦

**æœŸé–“**: 3é€±é–“ï¼ˆ15å–¶æ¥­æ—¥ï¼‰  
**å·¥æ•°**: 12æ—¥  
**æ‹…å½“è€…**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ 1å  
**é–‹å§‹æ¡ä»¶**: æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ãŒæ­£å¸¸ç¨¼åƒã—ã¦ã„ã‚‹ã“ã¨  
**å®Œäº†æ¡ä»¶**: 3ã¤ã®æ–°æ©Ÿèƒ½ãŒãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ç¨¼åƒã™ã‚‹ã“ã¨  

## ğŸ“Š Phase 1 ç›®æ¨™

### å®šé‡ç›®æ¨™
- **å–¶æ¥­åŠ¹ç‡**: 400%å‘ä¸Šï¼ˆæˆç´„ç¢ºç‡è‡ªå‹•äºˆæ¸¬ï¼‰
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆåŠŸç‡**: 250%å‘ä¸Šï¼ˆäº‹å‰ãƒªã‚¹ã‚¯æ¤œçŸ¥ï¼‰
- **ãƒŠãƒ¬ãƒƒã‚¸è“„ç©åŠ¹ç‡**: 500%å‘ä¸Šï¼ˆå®Œå…¨è‡ªå‹•åŒ–ï¼‰
- **æ–°æ©Ÿèƒ½åˆ©ç”¨ç‡**: 80%ä»¥ä¸Šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ1é€±é–“ä»¥å†…ã«åˆ©ç”¨

### å®šæ€§ç›®æ¨™
- ã‚·ãƒ³ãƒ—ãƒ«ãªæ“ä½œã§é«˜åº¦ãªæ©Ÿèƒ½ã¸ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- æ—¢å­˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é˜»å®³ã—ãªã„è‡ªç„¶ãªçµ±åˆ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ„è­˜ã›ãšã«æ©æµã‚’å—ã‘ã‚‰ã‚Œã‚‹è‡ªå‹•åŒ–

## ğŸš€ å®Ÿè£…ã‚¿ã‚¹ã‚¯è©³ç´°

### ã‚¿ã‚¹ã‚¯ 1.1: å–¶æ¥­AIåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
**æœŸé–“**: 5å–¶æ¥­æ—¥  
**å·¥æ•°**: 5æ—¥  
**æ‹…å½“**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢  

#### ğŸ“‹ è¦ä»¶å®šç¾©
**æ©Ÿèƒ½è¦ä»¶**:
1. ã‚¢ãƒã‚¤ãƒ³ãƒˆãƒ¡ãƒ³ãƒˆä¸€è¦§ã«æˆç´„ç¢ºç‡è¡¨ç¤º
2. å–¶æ¥­ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å¯è¦–åŒ–
3. è‡ªå‹•ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ææ¡ˆæ©Ÿèƒ½
4. ROIäºˆæ¸¬ã‚°ãƒ©ãƒ•

**éæ©Ÿèƒ½è¦ä»¶**:
- è¡¨ç¤ºé€Ÿåº¦: 2ç§’ä»¥å†…
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°: 5åˆ†é–“éš”

#### ğŸ—ï¸ å®Ÿè£…è©³ç´°

##### Day 1: ç’°å¢ƒæ§‹ç¯‰ãƒ»APIæ¥ç¶š
**ä½œæ¥­å†…å®¹**:
```typescript
// æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
/src/app/sales-analytics/page.tsx
/src/app/sales-analytics/components/SalesPredictionCard.tsx
/src/app/sales-analytics/components/ROIPredictionChart.tsx
/src/hooks/useSalesAnalytics.ts
```

**APIæ¥ç¶šç¢ºèª**:
```typescript
// /src/hooks/useSalesAnalytics.ts
export const useSalesAnalytics = () => {
  const [predictions, setPredictions] = useState([]);
  const [pipeline, setPipeline] = useState([]);
  
  const fetchSalesPredictions = useCallback(async () => {
    const response = await fetch('/api/sales/prediction');
    const data = await response.json();
    setPredictions(data);
  }, []);
  
  const fetchSalesProbability = useCallback(async () => {
    const response = await fetch('/api/sales/probability');
    const data = await response.json();
    setPipeline(data);
  }, []);
  
  return { predictions, pipeline, fetchSalesPredictions, fetchSalesProbability };
};
```

**å®Œäº†æ¡ä»¶**: APIæ¥ç¶šãŒæˆåŠŸã—ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã§ãã‚‹ã“ã¨

##### Day 2: æˆç´„ç¢ºç‡è¡¨ç¤ºæ©Ÿèƒ½
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/app/sales-analytics/components/SalesPredictionCard.tsx
interface SalesPredictionCardProps {
  appointment: Appointment;
  probability: number;
  confidence: number;
}

const SalesPredictionCard: React.FC<SalesPredictionCardProps> = ({ 
  appointment, 
  probability, 
  confidence 
}) => {
  const getProbabilityColor = (prob: number) => {
    if (prob >= 80) return 'text-green-600';
    if (prob >= 60) return 'text-yellow-600';
    return 'text-red-600';
  };

  return (
    <div className="bg-white rounded-lg shadow-md p-4">
      <h3 className="text-lg font-semibold">{appointment.title}</h3>
      <div className="flex items-center justify-between mt-2">
        <span className="text-sm text-gray-600">æˆç´„ç¢ºç‡</span>
        <span className={`text-2xl font-bold ${getProbabilityColor(probability)}`}>
          {probability}%
        </span>
      </div>
      <div className="w-full bg-gray-200 rounded-full h-2 mt-2">
        <div 
          className={`h-2 rounded-full ${
            probability >= 80 ? 'bg-green-500' : 
            probability >= 60 ? 'bg-yellow-500' : 'bg-red-500'
          }`}
          style={{ width: `${probability}%` }}
        ></div>
      </div>
      <p className="text-xs text-gray-500 mt-1">
        ä¿¡é ¼åº¦: {confidence}% | äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«: AI-v2.1
      </p>
    </div>
  );
};
```

**å®Œäº†æ¡ä»¶**: ã‚¢ãƒã‚¤ãƒ³ãƒˆãƒ¡ãƒ³ãƒˆä¸€è¦§ã§æˆç´„ç¢ºç‡ãŒè¦–è¦šçš„ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨

##### Day 3: å–¶æ¥­ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å¯è¦–åŒ–
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/app/sales-analytics/components/SalesPipelineChart.tsx
import { Bar, Line } from 'react-chartjs-2';

const SalesPipelineChart: React.FC = () => {
  const chartData = {
    labels: ['ãƒªãƒ¼ãƒ‰', 'åˆå›é¢è«‡', 'ææ¡ˆ', 'äº¤æ¸‰', 'æˆç´„'],
    datasets: [{
      label: 'æ¡ˆä»¶æ•°',
      data: [120, 80, 45, 25, 15],
      backgroundColor: [
        'rgba(59, 130, 246, 0.8)',
        'rgba(16, 185, 129, 0.8)', 
        'rgba(245, 158, 11, 0.8)',
        'rgba(239, 68, 68, 0.8)',
        'rgba(139, 92, 246, 0.8)'
      ]
    }]
  };

  const conversionData = {
    labels: ['ãƒªãƒ¼ãƒ‰', 'åˆå›é¢è«‡', 'ææ¡ˆ', 'äº¤æ¸‰', 'æˆç´„'],
    datasets: [{
      label: 'è»¢æ›ç‡ (%)',
      data: [100, 67, 56, 56, 60],
      borderColor: 'rgb(59, 130, 246)',
      backgroundColor: 'rgba(59, 130, 246, 0.2)',
    }]
  };

  return (
    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div className="bg-white p-6 rounded-lg shadow-md">
        <h3 className="text-lg font-semibold mb-4">å–¶æ¥­ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</h3>
        <Bar data={chartData} options={{
          responsive: true,
          plugins: {
            legend: { display: false }
          }
        }} />
      </div>
      
      <div className="bg-white p-6 rounded-lg shadow-md">
        <h3 className="text-lg font-semibold mb-4">ã‚¹ãƒ†ãƒ¼ã‚¸è»¢æ›ç‡</h3>
        <Line data={conversionData} options={{
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              max: 100
            }
          }
        }} />
      </div>
    </div>
  );
};
```

**å®Œäº†æ¡ä»¶**: å–¶æ¥­ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒè¦–è¦šçš„ã«è¡¨ç¤ºã•ã‚Œã€è»¢æ›ç‡ãŒæŠŠæ¡ã§ãã‚‹ã“ã¨

##### Day 4: è‡ªå‹•ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ææ¡ˆæ©Ÿèƒ½
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/app/sales-analytics/components/FollowUpSuggestions.tsx
interface FollowUpSuggestion {
  id: string;
  appointmentId: string;
  type: 'EMAIL' | 'CALL' | 'MEETING' | 'PROPOSAL';
  title: string;
  description: string;
  priority: 'HIGH' | 'MEDIUM' | 'LOW';
  recommendedDate: Date;
  aiConfidence: number;
}

const FollowUpSuggestions: React.FC = () => {
  const [suggestions, setSuggestions] = useState<FollowUpSuggestion[]>([]);

  useEffect(() => {
    const fetchSuggestions = async () => {
      const response = await fetch('/api/sales/automation');
      const data = await response.json();
      setSuggestions(data.suggestions || []);
    };
    fetchSuggestions();
  }, []);

  const executeSuggestion = async (suggestionId: string) => {
    try {
      await fetch('/api/sales/automation', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ action: 'execute', suggestionId })
      });
      
      // æˆåŠŸé€šçŸ¥
      toast.success('ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ');
      
      // ãƒªã‚¹ãƒˆæ›´æ–°
      setSuggestions(prev => 
        prev.filter(s => s.id !== suggestionId)
      );
    } catch (error) {
      toast.error('å®Ÿè¡Œã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  };

  return (
    <div className="bg-white rounded-lg shadow-md p-6">
      <h3 className="text-lg font-semibold mb-4">
        ğŸ¤– AIæ¨å¥¨ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—
      </h3>
      
      {suggestions.map(suggestion => (
        <div key={suggestion.id} className="border-l-4 border-blue-500 pl-4 mb-4">
          <div className="flex justify-between items-start">
            <div>
              <h4 className="font-medium">{suggestion.title}</h4>
              <p className="text-sm text-gray-600 mt-1">
                {suggestion.description}
              </p>
              <div className="flex items-center mt-2 space-x-4">
                <span className={`text-xs px-2 py-1 rounded ${
                  suggestion.priority === 'HIGH' ? 'bg-red-100 text-red-800' :
                  suggestion.priority === 'MEDIUM' ? 'bg-yellow-100 text-yellow-800' :
                  'bg-green-100 text-green-800'
                }`}>
                  {suggestion.priority}
                </span>
                <span className="text-xs text-gray-500">
                  æ¨å¥¨æ—¥: {format(new Date(suggestion.recommendedDate), 'MM/dd HH:mm')}
                </span>
                <span className="text-xs text-gray-500">
                  ä¿¡é ¼åº¦: {suggestion.aiConfidence}%
                </span>
              </div>
            </div>
            
            <button
              onClick={() => executeSuggestion(suggestion.id)}
              className="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600"
            >
              å®Ÿè¡Œ
            </button>
          </div>
        </div>
      ))}
      
      {suggestions.length === 0 && (
        <p className="text-gray-500 text-center py-8">
          ç¾åœ¨ã€æ¨å¥¨ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ã¯ã‚ã‚Šã¾ã›ã‚“
        </p>
      )}
    </div>
  );
};
```

**å®Œäº†æ¡ä»¶**: AIææ¡ˆã®ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã€ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å®Ÿè¡Œã§ãã‚‹ã“ã¨

##### Day 5: ROIäºˆæ¸¬ã‚°ãƒ©ãƒ•ãƒ»çµ±åˆãƒ»ãƒ†ã‚¹ãƒˆ
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/app/sales-analytics/components/ROIPredictionChart.tsx
const ROIPredictionChart: React.FC = () => {
  const [roiData, setROIData] = useState(null);

  useEffect(() => {
    const fetchROIData = async () => {
      const response = await fetch('/api/sales/prediction?type=roi');
      const data = await response.json();
      setROIData(data);
    };
    fetchROIData();
  }, []);

  const chartData = {
    labels: ['1ãƒ¶æœˆå¾Œ', '3ãƒ¶æœˆå¾Œ', '6ãƒ¶æœˆå¾Œ', '12ãƒ¶æœˆå¾Œ'],
    datasets: [{
      label: 'äºˆæ¸¬ROI (%)',
      data: roiData?.projections || [15, 45, 89, 156],
      borderColor: 'rgb(16, 185, 129)',
      backgroundColor: 'rgba(16, 185, 129, 0.2)',
      tension: 0.4
    }, {
      label: 'ä¿å®ˆçš„äºˆæ¸¬ (%)',
      data: roiData?.conservativeProjections || [8, 25, 52, 98],
      borderColor: 'rgb(107, 114, 128)',
      backgroundColor: 'rgba(107, 114, 128, 0.1)',
      borderDash: [5, 5],
      tension: 0.4
    }]
  };

  return (
    <div className="bg-white p-6 rounded-lg shadow-md">
      <h3 className="text-lg font-semibold mb-4">ROIäºˆæ¸¬</h3>
      <Line data={chartData} options={{
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            ticks: {
              callback: (value) => `${value}%`
            }
          }
        },
        plugins: {
          legend: {
            position: 'top'
          }
        }
      }} />
      
      <div className="mt-4 grid grid-cols-2 gap-4">
        <div className="text-center">
          <div className="text-2xl font-bold text-green-600">
            {roiData?.projectedROI || 156}%
          </div>
          <div className="text-sm text-gray-600">12ãƒ¶æœˆäºˆæ¸¬ROI</div>
        </div>
        <div className="text-center">
          <div className="text-2xl font-bold text-blue-600">
            {roiData?.confidenceLevel || 87}%
          </div>
          <div className="text-sm text-gray-600">äºˆæ¸¬ä¿¡é ¼åº¦</div>
        </div>
      </div>
    </div>
  );
};

// ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸çµ±åˆ
// /src/app/sales-analytics/page.tsx
const SalesAnalyticsPage: React.FC = () => {
  return (
    <div className="container mx-auto px-4 py-8">
      <div className="mb-8">
        <h1 className="text-3xl font-bold">ğŸ¯ å–¶æ¥­AIåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
        <p className="text-gray-600 mt-2">
          AIäºˆæ¸¬ã«ã‚ˆã‚‹å–¶æ¥­ãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–ã¨æˆæœå‘ä¸Š
        </p>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <SalesPredictionCard />
        <FollowUpSuggestions />
        <ROIPredictionChart />
      </div>

      <SalesPipelineChart />
      
      {/* æ—¢å­˜ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ã®ãƒªãƒ³ã‚¯ */}
      <div className="mt-8 text-center">
        <Link href="/dashboard" className="text-blue-500 hover:underline">
          â† ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹
        </Link>
      </div>
    </div>
  );
};
```

**ãƒ†ã‚¹ãƒˆé …ç›®**:
- [ ] APIæ¥ç¶šãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆè¡¨ç¤ºé€Ÿåº¦2ç§’ä»¥å†…ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ

#### âœ… å®Œäº†æ¡ä»¶
1. å–¶æ¥­AIåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
2. 4ã¤ã®ä¸»è¦æ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œ
3. æ—¢å­˜ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½
4. ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œå®Œäº†
5. ãƒ†ã‚¹ãƒˆé …ç›®ã‚’ã™ã¹ã¦ã‚¯ãƒªã‚¢

---

### ã‚¿ã‚¹ã‚¯ 1.2: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆåŠŸäºˆæ¸¬ç”»é¢
**æœŸé–“**: 4å–¶æ¥­æ—¥  
**å·¥æ•°**: 4æ—¥  
**æ‹…å½“**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢  

#### ğŸ“‹ è¦ä»¶å®šç¾©
**æ©Ÿèƒ½è¦ä»¶**:
1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸ã«æˆåŠŸç¢ºç‡è¡¨ç¤º
2. KGIé”æˆäºˆæ¸¬ã‚°ãƒ©ãƒ•
3. ãƒªã‚¹ã‚¯è¦å› ã‚¢ãƒ©ãƒ¼ãƒˆ
4. æ”¹å–„ææ¡ˆã®è‡ªå‹•è¡¨ç¤º

**éæ©Ÿèƒ½è¦ä»¶**:
- æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸ã¸ã®çµ±åˆ
- æˆåŠŸç¢ºç‡ç®—å‡ºã¯å³åº§ã«è¡¨ç¤ºï¼ˆ1ç§’ä»¥å†…ï¼‰
- äºˆæ¸¬ç²¾åº¦ã®ä¿¡é ¼åº¦è¡¨ç¤º

#### ğŸ—ï¸ å®Ÿè£…è©³ç´°

##### Day 1: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸èª¿æŸ»ãƒ»APIæ¥ç¶š
**ä½œæ¥­å†…å®¹**:
```typescript
// æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µ
/src/app/projects/[id]/page.tsx (æ—¢å­˜)
/src/app/projects/[id]/analytics/page.tsx (æ–°è¦)
/src/hooks/useProjectAnalytics.ts (æ–°è¦)
```

**APIæ¥ç¶šå®Ÿè£…**:
```typescript
// /src/hooks/useProjectAnalytics.ts
export const useProjectAnalytics = (projectId: string) => {
  const [analytics, setAnalytics] = useState(null);
  const [loading, setLoading] = useState(true);

  const fetchProjectAnalytics = useCallback(async () => {
    try {
      const response = await fetch(`/api/analytics/project-success?projectId=${projectId}`);
      const data = await response.json();
      setAnalytics(data);
    } catch (error) {
      console.error('Failed to fetch project analytics:', error);
    } finally {
      setLoading(false);
    }
  }, [projectId]);

  const fetchKGIData = useCallback(async () => {
    const response = await fetch(`/api/projects/${projectId}/kgi`);
    return await response.json();
  }, [projectId]);

  useEffect(() => {
    fetchProjectAnalytics();
  }, [fetchProjectAnalytics]);

  return { analytics, loading, fetchKGIData };
};
```

**å®Œäº†æ¡ä»¶**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’æŒ‡å®šã—ã¦APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—ã§ãã‚‹ã“ã¨

##### Day 2: æˆåŠŸç¢ºç‡è¡¨ç¤ºæ©Ÿèƒ½
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/app/projects/[id]/analytics/components/SuccessPrediction.tsx
interface SuccessPredictionProps {
  projectId: string;
  analytics: ProjectAnalytics;
}

const SuccessPrediction: React.FC<SuccessPredictionProps> = ({ 
  projectId, 
  analytics 
}) => {
  const successProbability = analytics?.successProbability || 0;
  const confidence = analytics?.confidence || 0;
  const factors = analytics?.factors || [];

  const getSuccessColor = (probability: number) => {
    if (probability >= 80) return { bg: 'bg-green-100', text: 'text-green-800', border: 'border-green-500' };
    if (probability >= 60) return { bg: 'bg-yellow-100', text: 'text-yellow-800', border: 'border-yellow-500' };
    return { bg: 'bg-red-100', text: 'text-red-800', border: 'border-red-500' };
  };

  const colors = getSuccessColor(successProbability);

  return (
    <div className={`${colors.bg} ${colors.border} border-l-4 p-6 rounded-lg`}>
      <div className="flex items-center justify-between">
        <div>
          <h3 className={`text-lg font-semibold ${colors.text}`}>
            ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆåŠŸäºˆæ¸¬
          </h3>
          <p className="text-sm text-gray-600 mt-1">
            AIåˆ†æã«ã‚ˆã‚‹æˆåŠŸç¢ºç‡è©•ä¾¡
          </p>
        </div>
        
        <div className="text-right">
          <div className={`text-4xl font-bold ${colors.text}`}>
            {successProbability}%
          </div>
          <div className="text-sm text-gray-500">
            ä¿¡é ¼åº¦: {confidence}%
          </div>
        </div>
      </div>

      {/* æˆåŠŸè¦å› ã®è¡¨ç¤º */}
      <div className="mt-4">
        <h4 className="font-medium text-gray-800 mb-2">ä¸»è¦æˆåŠŸè¦å› </h4>
        <div className="space-y-2">
          {factors.slice(0, 3).map((factor, index) => (
            <div key={index} className="flex items-center justify-between">
              <span className="text-sm text-gray-700">{factor.name}</span>
              <div className="flex items-center">
                <div className="w-20 bg-gray-200 rounded-full h-2 mr-2">
                  <div 
                    className={`h-2 rounded-full ${
                      factor.impact >= 0.7 ? 'bg-green-500' :
                      factor.impact >= 0.4 ? 'bg-yellow-500' : 'bg-red-500'
                    }`}
                    style={{ width: `${factor.impact * 100}%` }}
                  ></div>
                </div>
                <span className="text-xs text-gray-500 w-8">
                  {Math.round(factor.impact * 100)}%
                </span>
              </div>
            </div>
          ))}
        </div>
      </div>

      <div className="mt-4 text-xs text-gray-500">
        æœ€çµ‚æ›´æ–°: {format(new Date(analytics.lastUpdated), 'yyyy/MM/dd HH:mm')} |
        äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«: AI-ProjectSuccess-v3.2
      </div>
    </div>
  );
};
```

**å®Œäº†æ¡ä»¶**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆåŠŸç¢ºç‡ãŒè¦–è¦šçš„ã«åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨

##### Day 3: KGIé”æˆäºˆæ¸¬ã‚°ãƒ©ãƒ•
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/app/projects/[id]/analytics/components/KGIPredictionChart.tsx
const KGIPredictionChart: React.FC<{ projectId: string }> = ({ projectId }) => {
  const [kgiData, setKgiData] = useState(null);

  useEffect(() => {
    const fetchKGIData = async () => {
      const response = await fetch(`/api/projects/${projectId}/kgi`);
      const data = await response.json();
      setKgiData(data);
    };
    fetchKGIData();
  }, [projectId]);

  if (!kgiData) return <div className="animate-pulse bg-gray-200 h-64 rounded"></div>;

  const chartData = {
    labels: kgiData.timeline?.map(item => item.month) || [],
    datasets: [{
      label: 'KGIé”æˆäºˆæ¸¬',
      data: kgiData.predictions?.map(item => item.achievementRate) || [],
      borderColor: 'rgb(59, 130, 246)',
      backgroundColor: 'rgba(59, 130, 246, 0.1)',
      tension: 0.4,
      fill: true
    }, {
      label: 'ç›®æ¨™ãƒ©ã‚¤ãƒ³',
      data: new Array(kgiData.timeline?.length || 0).fill(100),
      borderColor: 'rgb(34, 197, 94)',
      borderDash: [5, 5],
      pointRadius: 0
    }, {
      label: 'æœ€ä½ãƒ©ã‚¤ãƒ³',
      data: new Array(kgiData.timeline?.length || 0).fill(kgiData.minimumTarget || 80),
      borderColor: 'rgb(239, 68, 68)',
      borderDash: [2, 2],
      pointRadius: 0
    }]
  };

  return (
    <div className="bg-white p-6 rounded-lg shadow-md">
      <div className="flex justify-between items-center mb-4">
        <h3 className="text-lg font-semibold">KGIé”æˆäºˆæ¸¬</h3>
        <div className="text-sm text-gray-500">
          ç›®æ¨™å€¤: {kgiData.target?.value} {kgiData.target?.unit}
        </div>
      </div>

      <Line data={chartData} options={{
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            max: 120,
            ticks: {
              callback: (value) => `${value}%`
            }
          }
        },
        plugins: {
          legend: {
            position: 'bottom'
          },
          tooltip: {
            callbacks: {
              label: (context) => {
                return `${context.dataset.label}: ${context.parsed.y}%`;
              }
            }
          }
        }
      }} />

      {/* KGIã‚µãƒãƒªãƒ¼ */}
      <div className="mt-6 grid grid-cols-3 gap-4">
        <div className="text-center">
          <div className="text-2xl font-bold text-blue-600">
            {kgiData.currentAchievement || 0}%
          </div>
          <div className="text-sm text-gray-600">ç¾åœ¨ã®é”æˆç‡</div>
        </div>
        <div className="text-center">
          <div className="text-2xl font-bold text-green-600">
            {kgiData.projectedFinalAchievement || 0}%
          </div>
          <div className="text-sm text-gray-600">æœ€çµ‚äºˆæ¸¬é”æˆç‡</div>
        </div>
        <div className="text-center">
          <div className={`text-2xl font-bold ${
            (kgiData.projectedFinalAchievement || 0) >= 100 ? 'text-green-600' : 'text-red-600'
          }`}>
            {(kgiData.projectedFinalAchievement || 0) >= 100 ? 'é”æˆ' : 'æœªé”'}
          </div>
          <div className="text-sm text-gray-600">äºˆæ¸¬çµæœ</div>
        </div>
      </div>
    </div>
  );
};
```

**å®Œäº†æ¡ä»¶**: KGIé”æˆäºˆæ¸¬ãŒæ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•ã§å¯è¦–åŒ–ã•ã‚Œã‚‹ã“ã¨

##### Day 4: ãƒªã‚¹ã‚¯è¦å› ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»æ”¹å–„ææ¡ˆãƒ»çµ±åˆ
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/app/projects/[id]/analytics/components/RiskAlerts.tsx
const RiskAlerts: React.FC<{ analytics: ProjectAnalytics }> = ({ analytics }) => {
  const risks = analytics?.risks || [];
  const suggestions = analytics?.suggestions || [];

  const getRiskLevel = (score: number) => {
    if (score >= 0.8) return { level: 'HIGH', color: 'red', icon: 'ğŸš¨' };
    if (score >= 0.5) return { level: 'MEDIUM', color: 'yellow', icon: 'âš ï¸' };
    return { level: 'LOW', color: 'green', icon: 'âœ…' };
  };

  return (
    <div className="space-y-6">
      {/* ãƒªã‚¹ã‚¯ã‚¢ãƒ©ãƒ¼ãƒˆ */}
      <div className="bg-white p-6 rounded-lg shadow-md">
        <h3 className="text-lg font-semibold mb-4 flex items-center">
          ğŸš¨ ãƒªã‚¹ã‚¯è¦å› åˆ†æ
        </h3>
        
        {risks.length > 0 ? (
          <div className="space-y-3">
            {risks.map((risk, index) => {
              const riskInfo = getRiskLevel(risk.score);
              return (
                <div key={index} className={`border-l-4 border-${riskInfo.color}-500 pl-4 py-2`}>
                  <div className="flex items-center justify-between">
                    <div className="flex items-center">
                      <span className="mr-2">{riskInfo.icon}</span>
                      <span className="font-medium">{risk.factor}</span>
                    </div>
                    <span className={`text-sm px-2 py-1 rounded bg-${riskInfo.color}-100 text-${riskInfo.color}-800`}>
                      {riskInfo.level}
                    </span>
                  </div>
                  <p className="text-sm text-gray-600 mt-1 ml-6">
                    {risk.description}
                  </p>
                  <div className="flex items-center mt-2 ml-6">
                    <div className={`w-20 bg-gray-200 rounded-full h-2 mr-2`}>
                      <div 
                        className={`h-2 rounded-full bg-${riskInfo.color}-500`}
                        style={{ width: `${risk.score * 100}%` }}
                      ></div>
                    </div>
                    <span className="text-xs text-gray-500">
                      å½±éŸ¿åº¦: {Math.round(risk.score * 100)}%
                    </span>
                  </div>
                </div>
              );
            })}
          </div>
        ) : (
          <p className="text-gray-500 text-center py-4">
            ç¾åœ¨ã€é‡å¤§ãªãƒªã‚¹ã‚¯è¦å› ã¯æ¤œå‡ºã•ã‚Œã¦ã„ã¾ã›ã‚“
          </p>
        )}
      </div>

      {/* æ”¹å–„ææ¡ˆ */}
      <div className="bg-white p-6 rounded-lg shadow-md">
        <h3 className="text-lg font-semibold mb-4 flex items-center">
          ğŸ’¡ AIæ”¹å–„ææ¡ˆ
        </h3>
        
        {suggestions.length > 0 ? (
          <div className="space-y-4">
            {suggestions.map((suggestion, index) => (
              <div key={index} className="border border-blue-200 rounded-lg p-4">
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <h4 className="font-medium text-blue-800">
                      {suggestion.title}
                    </h4>
                    <p className="text-sm text-gray-600 mt-1">
                      {suggestion.description}
                    </p>
                    <div className="flex items-center mt-2 space-x-4">
                      <span className="text-xs text-blue-600">
                        æœŸå¾…åŠ¹æœ: +{suggestion.expectedImprovement}%
                      </span>
                      <span className="text-xs text-gray-500">
                        å®Ÿè£…å·¥æ•°: {suggestion.estimatedEffort}
                      </span>
                    </div>
                  </div>
                  
                  <button className="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 ml-4">
                    é©ç”¨
                  </button>
                </div>
              </div>
            ))}
          </div>
        ) : (
          <p className="text-gray-500 text-center py-4">
            ç¾åœ¨ã€ç‰¹åˆ¥ãªæ”¹å–„ææ¡ˆã¯ã‚ã‚Šã¾ã›ã‚“
          </p>
        )}
      </div>
    </div>
  );
};

// ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸çµ±åˆ
// /src/app/projects/[id]/analytics/page.tsx
const ProjectAnalyticsPage: React.FC<{ params: { id: string } }> = ({ params }) => {
  const { analytics, loading } = useProjectAnalytics(params.id);

  if (loading) {
    return (
      <div className="container mx-auto px-4 py-8">
        <div className="animate-pulse space-y-4">
          <div className="h-8 bg-gray-200 rounded w-1/2"></div>
          <div className="h-64 bg-gray-200 rounded"></div>
          <div className="h-32 bg-gray-200 rounded"></div>
        </div>
      </div>
    );
  }

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="mb-8">
        <h1 className="text-3xl font-bold">ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ†æ</h1>
        <p className="text-gray-600 mt-2">
          AIäºˆæ¸¬ã«ã‚ˆã‚‹æˆåŠŸç¢ºç‡ã¨ãƒªã‚¹ã‚¯åˆ†æ
        </p>
      </div>

      <div className="space-y-8">
        <SuccessPrediction projectId={params.id} analytics={analytics} />
        
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <KGIPredictionChart projectId={params.id} />
          <RiskAlerts analytics={analytics} />
        </div>
      </div>

      <div className="mt-8 text-center">
        <Link href={`/projects/${params.id}`} className="text-blue-500 hover:underline">
          â† ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ã«æˆ»ã‚‹
        </Link>
      </div>
    </div>
  );
};
```

**æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸ã¸ã®çµ±åˆ**:
```typescript
// /src/app/projects/[id]/page.tsx ã«è¿½åŠ 
const ProjectDetailPage = ({ params }) => {
  // æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰...

  return (
    <div className="container mx-auto px-4 py-8">
      {/* æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
      
      {/* æ–°è¦: åˆ†æã‚¿ãƒ– */}
      <div className="mt-8">
        <div className="border-b border-gray-200">
          <nav className="-mb-px flex space-x-8">
            <Link 
              href={`/projects/${params.id}`}
              className="border-transparent text-gray-500 hover:text-gray-700 border-b-2 py-2 px-1 text-sm font-medium"
            >
              è©³ç´°
            </Link>
            <Link 
              href={`/projects/${params.id}/analytics`}
              className="border-blue-500 text-blue-600 border-b-2 py-2 px-1 text-sm font-medium"
            >
              AIåˆ†æ ğŸ”¥
            </Link>
          </nav>
        </div>
      </div>
    </div>
  );
};
```

#### âœ… å®Œäº†æ¡ä»¶
1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸ã‹ã‚‰åˆ†æç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
2. æˆåŠŸç¢ºç‡ãŒæ˜ç¢ºã«è¡¨ç¤ºã•ã‚Œã‚‹
3. KGIé”æˆäºˆæ¸¬ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹
4. ãƒªã‚¹ã‚¯è¦å› ã¨æ”¹å–„ææ¡ˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
5. æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†æ©Ÿèƒ½ã¨çµ±åˆã•ã‚Œã‚‹

---

### ã‚¿ã‚¹ã‚¯ 1.3: ãƒŠãƒ¬ãƒƒã‚¸è‡ªå‹•åŒ–UIçµ±åˆ
**æœŸé–“**: 3å–¶æ¥­æ—¥  
**å·¥æ•°**: 3æ—¥  
**æ‹…å½“**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢  

#### ğŸ“‹ è¦ä»¶å®šç¾©
**æ©Ÿèƒ½è¦ä»¶**:
1. ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã®ãƒŠãƒ¬ãƒƒã‚¸ç”Ÿæˆé€šçŸ¥
2. ãƒŠãƒ¬ãƒƒã‚¸å“è³ªè©•ä¾¡ã®è¡¨ç¤º
3. é‡è¤‡ãƒŠãƒ¬ãƒƒã‚¸çµ±åˆUI
4. è‡ªå‹•åŒ–å±¥æ­´ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

**éæ©Ÿèƒ½è¦ä»¶**:
- æ—¢å­˜ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†ã¨ã®çµ±åˆ
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥æ©Ÿèƒ½
- è‡ªå‹•åŒ–ãƒ—ãƒ­ã‚»ã‚¹ã®é€æ˜æ€§ç¢ºä¿

#### ğŸ—ï¸ å®Ÿè£…è©³ç´°

##### Day 1: æ—¢å­˜ãƒŠãƒ¬ãƒƒã‚¸ãƒšãƒ¼ã‚¸èª¿æŸ»ãƒ»APIæ¥ç¶šç¢ºèª
**ä½œæ¥­å†…å®¹**:
```typescript
// æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µ
/src/app/knowledge/page.tsx (æ—¢å­˜)
/src/app/knowledge/automation/page.tsx (æ–°è¦)
/src/hooks/useKnowledgeAutomation.ts (æ–°è¦)
```

**APIæ¥ç¶šå®Ÿè£…**:
```typescript
// /src/hooks/useKnowledgeAutomation.ts
export const useKnowledgeAutomation = () => {
  const [automationHistory, setAutomationHistory] = useState([]);
  const [pendingKnowledge, setPendingKnowledge] = useState([]);
  const [qualityReports, setQualityReports] = useState([]);

  const fetchAutomationHistory = useCallback(async () => {
    const response = await fetch('/api/knowledge-automation?type=history');
    const data = await response.json();
    setAutomationHistory(data.history || []);
  }, []);

  const fetchPendingKnowledge = useCallback(async () => {
    const response = await fetch('/api/knowledge-automation?type=pending');
    const data = await response.json();
    setPendingKnowledge(data.pending || []);
  }, []);

  const processTaskCompletion = useCallback(async (taskId: string, completionData: any) => {
    const response = await fetch('/api/knowledge-automation', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        action: 'processTaskCompletion',
        taskId,
        completionData
      })
    });
    return await response.json();
  }, []);

  const evaluateKnowledgeQuality = useCallback(async (knowledgeId: string) => {
    const response = await fetch('/api/knowledge-automation', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        action: 'evaluateKnowledgeQuality',
        knowledgeId
      })
    });
    return await response.json();
  }, []);

  return {
    automationHistory,
    pendingKnowledge,
    qualityReports,
    fetchAutomationHistory,
    fetchPendingKnowledge,
    processTaskCompletion,
    evaluateKnowledgeQuality
  };
};
```

**å®Œäº†æ¡ä»¶**: ãƒŠãƒ¬ãƒƒã‚¸è‡ªå‹•åŒ–APIã«æ¥ç¶šã—ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã§ãã‚‹ã“ã¨

##### Day 2: ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ãƒŠãƒ¬ãƒƒã‚¸ç”Ÿæˆé€šçŸ¥ãƒ»å“è³ªè©•ä¾¡è¡¨ç¤º
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/components/notifications/KnowledgeGenerationNotification.tsx
interface KnowledgeGenerationNotificationProps {
  taskId: string;
  taskTitle: string;
  onGenerate: () => void;
  onDismiss: () => void;
}

const KnowledgeGenerationNotification: React.FC<KnowledgeGenerationNotificationProps> = ({
  taskId,
  taskTitle,
  onGenerate,
  onDismiss
}) => {
  const [isGenerating, setIsGenerating] = useState(false);

  const handleGenerate = async () => {
    setIsGenerating(true);
    try {
      await onGenerate();
      toast.success('ãƒŠãƒ¬ãƒƒã‚¸ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸï¼');
    } catch (error) {
      toast.error('ãƒŠãƒ¬ãƒƒã‚¸ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setIsGenerating(false);
    }
  };

  return (
    <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
      <div className="flex items-start">
        <div className="flex-shrink-0">
          <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
            ğŸ§ 
          </div>
        </div>
        
        <div className="ml-3 flex-1">
          <h3 className="text-sm font-medium text-blue-800">
            ãƒŠãƒ¬ãƒƒã‚¸è‡ªå‹•ç”Ÿæˆã®ææ¡ˆ
          </h3>
          <p className="mt-1 text-sm text-blue-700">
            ã€Œ{taskTitle}ã€ã®å®Œäº†å†…å®¹ã‹ã‚‰ãƒŠãƒ¬ãƒƒã‚¸ã‚’è‡ªå‹•ç”Ÿæˆã§ãã¾ã™ã€‚
            ã“ã®ã‚¿ã‚¹ã‚¯ã«ã¯æœ‰ç”¨ãªçŸ¥è¦‹ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
          </p>
          
          <div className="mt-3 flex space-x-2">
            <button
              onClick={handleGenerate}
              disabled={isGenerating}
              className="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 disabled:opacity-50"
            >
              {isGenerating ? 'ç”Ÿæˆä¸­...' : 'ãƒŠãƒ¬ãƒƒã‚¸ã‚’ç”Ÿæˆ'}
            </button>
            <button
              onClick={onDismiss}
              className="bg-gray-200 text-gray-800 px-3 py-1 rounded text-sm hover:bg-gray-300"
            >
              å¾Œã§
            </button>
          </div>
        </div>
        
        <div className="flex-shrink-0 ml-4">
          <button onClick={onDismiss} className="text-gray-400 hover:text-gray-600">
            âœ•
          </button>
        </div>
      </div>
    </div>
  );
};

// /src/app/knowledge/automation/components/QualityAssessment.tsx
const QualityAssessment: React.FC<{ knowledgeId: string }> = ({ knowledgeId }) => {
  const [assessment, setAssessment] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchAssessment = async () => {
      try {
        const response = await fetch('/api/knowledge-automation', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            action: 'evaluateKnowledgeQuality',
            knowledgeId
          })
        });
        const data = await response.json();
        setAssessment(data.assessment);
      } catch (error) {
        console.error('Failed to fetch quality assessment:', error);
      } finally {
        setLoading(false);
      }
    };

    fetchAssessment();
  }, [knowledgeId]);

  if (loading) {
    return <div className="animate-pulse bg-gray-200 h-32 rounded"></div>;
  }

  if (!assessment) {
    return <div className="text-gray-500">å“è³ªè©•ä¾¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>;
  }

  const getScoreColor = (score: number) => {
    if (score >= 8) return 'text-green-600';
    if (score >= 6) return 'text-yellow-600';
    return 'text-red-600';
  };

  return (
    <div className="bg-white p-6 rounded-lg shadow-md">
      <h3 className="text-lg font-semibold mb-4">ğŸ“Š ãƒŠãƒ¬ãƒƒã‚¸å“è³ªè©•ä¾¡</h3>
      
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <div className="text-center">
          <div className={`text-2xl font-bold ${getScoreColor(assessment.practicalityScore)}`}>
            {assessment.practicalityScore}/10
          </div>
          <div className="text-sm text-gray-600">å®Ÿç”¨æ€§</div>
        </div>
        <div className="text-center">
          <div className={`text-2xl font-bold ${getScoreColor(assessment.clarityScore)}`}>
            {assessment.clarityScore}/10
          </div>
          <div className="text-sm text-gray-600">ç†è§£ã—ã‚„ã™ã•</div>
        </div>
        <div className="text-center">
          <div className={`text-2xl font-bold ${getScoreColor(assessment.completenessScore)}`}>
            {assessment.completenessScore}/10
          </div>
          <div className="text-sm text-gray-600">å®Œå…¨æ€§</div>
        </div>
        <div className="text-center">
          <div className={`text-2xl font-bold ${getScoreColor(assessment.accuracyScore)}`}>
            {assessment.accuracyScore}/10
          </div>
          <div className="text-sm text-gray-600">æ­£ç¢ºæ€§</div>
        </div>
      </div>

      <div className="mb-4">
        <div className="flex justify-between items-center mb-2">
          <span className="text-sm font-medium">ç·åˆã‚¹ã‚³ã‚¢</span>
          <span className={`text-lg font-bold ${getScoreColor(assessment.overallScore)}`}>
            {assessment.overallScore}/10
          </span>
        </div>
        <div className="w-full bg-gray-200 rounded-full h-3">
          <div 
            className={`h-3 rounded-full ${
              assessment.overallScore >= 8 ? 'bg-green-500' :
              assessment.overallScore >= 6 ? 'bg-yellow-500' : 'bg-red-500'
            }`}
            style={{ width: `${(assessment.overallScore / 10) * 100}%` }}
          ></div>
        </div>
      </div>

      {assessment.improvementSuggestions && assessment.improvementSuggestions.length > 0 && (
        <div>
          <h4 className="font-medium text-gray-800 mb-2">æ”¹å–„ææ¡ˆ</h4>
          <ul className="space-y-1">
            {assessment.improvementSuggestions.map((suggestion, index) => (
              <li key={index} className="text-sm text-gray-600 flex items-start">
                <span className="text-blue-500 mr-2">â€¢</span>
                {suggestion}
              </li>
            ))}
          </ul>
        </div>
      )}
    </div>
  );
};
```

**å®Œäº†æ¡ä»¶**: ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã«ãƒŠãƒ¬ãƒƒã‚¸ç”Ÿæˆé€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã€å“è³ªè©•ä¾¡ãŒå¯è¦–åŒ–ã•ã‚Œã‚‹ã“ã¨

##### Day 3: é‡è¤‡ãƒŠãƒ¬ãƒƒã‚¸çµ±åˆUIãƒ»è‡ªå‹•åŒ–å±¥æ­´ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»çµ±åˆ
**ä½œæ¥­å†…å®¹**:
```typescript
// /src/app/knowledge/automation/components/DuplicateKnowledgeMerge.tsx
const DuplicateKnowledgeMerge: React.FC = () => {
  const [duplicates, setDuplicates] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchDuplicates = async () => {
      try {
        const response = await fetch('/api/knowledge-automation?type=duplicates');
        const data = await response.json();
        setDuplicates(data.duplicates || []);
      } catch (error) {
        console.error('Failed to fetch duplicates:', error);
      } finally {
        setLoading(false);
      }
    };

    fetchDuplicates();
  }, []);

  const handleMerge = async (duplicateGroup: any) => {
    try {
      const response = await fetch('/api/knowledge-automation', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          action: 'mergeDuplicates',
          knowledgeIds: duplicateGroup.items.map(item => item.id),
          primaryId: duplicateGroup.primary.id
        })
      });

      if (response.ok) {
        toast.success('é‡è¤‡ãƒŠãƒ¬ãƒƒã‚¸ã‚’çµ±åˆã—ã¾ã—ãŸ');
        setDuplicates(prev => prev.filter(group => group.id !== duplicateGroup.id));
      }
    } catch (error) {
      toast.error('çµ±åˆã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
  };

  if (loading) {
    return <div className="animate-pulse bg-gray-200 h-64 rounded"></div>;
  }

  return (
    <div className="bg-white p-6 rounded-lg shadow-md">
      <h3 className="text-lg font-semibold mb-4">ğŸ”„ é‡è¤‡ãƒŠãƒ¬ãƒƒã‚¸çµ±åˆ</h3>
      
      {duplicates.length > 0 ? (
        <div className="space-y-4">
          {duplicates.map((group, index) => (
            <div key={index} className="border border-orange-200 rounded-lg p-4">
              <div className="flex items-start justify-between">
                <div className="flex-1">
                  <h4 className="font-medium text-orange-800 mb-2">
                    é¡ä¼¼ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆé¡ä¼¼åº¦: {Math.round(group.similarity * 100)}%ï¼‰
                  </h4>
                  
                  <div className="space-y-2">
                    <div className="bg-orange-50 p-3 rounded border-l-4 border-orange-500">
                      <h5 className="font-medium text-sm">ğŸ¯ çµ±åˆå…ˆï¼ˆãƒ—ãƒ©ã‚¤ãƒãƒªï¼‰</h5>
                      <p className="text-sm text-gray-700">{group.primary.title}</p>
                      <p className="text-xs text-gray-500 mt-1">
                        ä½œæˆ: {format(new Date(group.primary.createdAt), 'yyyy/MM/dd')} |
                        ã‚¹ã‚³ã‚¢: {group.primary.qualityScore}/10
                      </p>
                    </div>
                    
                    {group.items.map((item, itemIndex) => (
                      <div key={itemIndex} className="bg-gray-50 p-3 rounded">
                        <h5 className="font-medium text-sm">ğŸ“„ çµ±åˆå¯¾è±¡</h5>
                        <p className="text-sm text-gray-700">{item.title}</p>
                        <p className="text-xs text-gray-500 mt-1">
                          ä½œæˆ: {format(new Date(item.createdAt), 'yyyy/MM/dd')} |
                          ã‚¹ã‚³ã‚¢: {item.qualityScore}/10
                        </p>
                      </div>
                    ))}
                  </div>
                </div>
                
                <div className="ml-4 space-y-2">
                  <button
                    onClick={() => handleMerge(group)}
                    className="bg-orange-500 text-white px-3 py-1 rounded text-sm hover:bg-orange-600 block w-full"
                  >
                    çµ±åˆå®Ÿè¡Œ
                  </button>
                  <button
                    onClick={() => setDuplicates(prev => prev.filter(g => g.id !== group.id))}
                    className="bg-gray-200 text-gray-800 px-3 py-1 rounded text-sm hover:bg-gray-300 block w-full"
                  >
                    ã‚¹ã‚­ãƒƒãƒ—
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>
      ) : (
        <p className="text-gray-500 text-center py-8">
          ç¾åœ¨ã€çµ±åˆãŒå¿…è¦ãªé‡è¤‡ãƒŠãƒ¬ãƒƒã‚¸ã¯ã‚ã‚Šã¾ã›ã‚“
        </p>
      )}
    </div>
  );
};

// /src/app/knowledge/automation/components/AutomationDashboard.tsx
const AutomationDashboard: React.FC = () => {
  const { automationHistory } = useKnowledgeAutomation();
  const [stats, setStats] = useState(null);

  useEffect(() => {
    const fetchStats = async () => {
      const response = await fetch('/api/knowledge-automation?type=stats');
      const data = await response.json();
      setStats(data.stats);
    };
    fetchStats();
  }, []);

  return (
    <div className="space-y-6">
      {/* çµ±è¨ˆã‚µãƒãƒªãƒ¼ */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div className="bg-white p-4 rounded-lg shadow-md text-center">
          <div className="text-2xl font-bold text-blue-600">
            {stats?.totalGenerated || 0}
          </div>
          <div className="text-sm text-gray-600">è‡ªå‹•ç”Ÿæˆæ•°</div>
        </div>
        <div className="bg-white p-4 rounded-lg shadow-md text-center">
          <div className="text-2xl font-bold text-green-600">
            {stats?.averageQuality || 0}/10
          </div>
          <div className="text-sm text-gray-600">å¹³å‡å“è³ªã‚¹ã‚³ã‚¢</div>
        </div>
        <div className="bg-white p-4 rounded-lg shadow-md text-center">
          <div className="text-2xl font-bold text-orange-600">
            {stats?.duplicatesFound || 0}
          </div>
          <div className="text-sm text-gray-600">é‡è¤‡æ¤œå‡ºæ•°</div>
        </div>
        <div className="bg-white p-4 rounded-lg shadow-md text-center">
          <div className="text-2xl font-bold text-purple-600">
            {stats?.timesSaved || 0}h
          </div>
          <div className="text-sm text-gray-600">ç¯€ç´„æ™‚é–“</div>
        </div>
      </div>

      {/* è‡ªå‹•åŒ–å±¥æ­´ */}
      <div className="bg-white p-6 rounded-lg shadow-md">
        <h3 className="text-lg font-semibold mb-4">ğŸ“ˆ è‡ªå‹•åŒ–å±¥æ­´</h3>
        
        {automationHistory.length > 0 ? (
          <div className="space-y-3">
            {automationHistory.slice(0, 10).map((item, index) => (
              <div key={index} className="flex items-center justify-between border-b pb-3">
                <div className="flex items-center">
                  <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                    ğŸ§ 
                  </div>
                  <div>
                    <p className="font-medium">{item.knowledgeTitle}</p>
                    <p className="text-sm text-gray-600">
                      ã‚¿ã‚¹ã‚¯: {item.taskTitle}
                    </p>
                    <p className="text-xs text-gray-500">
                      {format(new Date(item.automationDate), 'yyyy/MM/dd HH:mm')}
                    </p>
                  </div>
                </div>
                
                <div className="text-right">
                  <div className="text-sm font-medium">
                    å“è³ª: {item.initialQualityScore}/10
                  </div>
                  <div className="text-xs text-gray-500">
                    AIä¿¡é ¼åº¦: {Math.round(item.aiConfidence * 100)}%
                  </div>
                </div>
              </div>
            ))}
          </div>
        ) : (
          <p className="text-gray-500 text-center py-8">
            ã¾ã è‡ªå‹•åŒ–å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“
          </p>
        )}
      </div>
    </div>
  );
};

// ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸çµ±åˆ
// /src/app/knowledge/automation/page.tsx
const KnowledgeAutomationPage: React.FC = () => {
  return (
    <div className="container mx-auto px-4 py-8">
      <div className="mb-8">
        <h1 className="text-3xl font-bold">ğŸ§  ãƒŠãƒ¬ãƒƒã‚¸è‡ªå‹•åŒ–ã‚»ãƒ³ã‚¿ãƒ¼</h1>
        <p className="text-gray-600 mt-2">
          AIé§†å‹•ã«ã‚ˆã‚‹ãƒŠãƒ¬ãƒƒã‚¸è‡ªå‹•ç”Ÿæˆãƒ»å“è³ªç®¡ç†ãƒ»çµ±åˆã‚·ã‚¹ãƒ†ãƒ 
        </p>
      </div>

      <div className="space-y-8">
        <AutomationDashboard />
        
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <QualityAssessment />
          <DuplicateKnowledgeMerge />
        </div>
      </div>

      <div className="mt-8 text-center">
        <Link href="/knowledge" className="text-blue-500 hover:underline">
          â† ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†ã«æˆ»ã‚‹
        </Link>
      </div>
    </div>
  );
};
```

**æ—¢å­˜ãƒŠãƒ¬ãƒƒã‚¸ãƒšãƒ¼ã‚¸ã¸ã®çµ±åˆ**:
```typescript
// /src/app/knowledge/page.tsx ã«è¿½åŠ 
const KnowledgePage = () => {
  // æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰...

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="flex justify-between items-center mb-8">
        <h1 className="text-3xl font-bold">ğŸ“š ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†</h1>
        
        {/* æ–°è¦: è‡ªå‹•åŒ–ã‚»ãƒ³ã‚¿ãƒ¼ãƒªãƒ³ã‚¯ */}
        <Link 
          href="/knowledge/automation"
          className="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-purple-700 flex items-center"
        >
          ğŸ¤– è‡ªå‹•åŒ–ã‚»ãƒ³ã‚¿ãƒ¼
        </Link>
      </div>

      {/* æ—¢å­˜ã®ãƒŠãƒ¬ãƒƒã‚¸ä¸€è¦§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
    </div>
  );
};
```

#### âœ… å®Œäº†æ¡ä»¶
1. ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã«ãƒŠãƒ¬ãƒƒã‚¸ç”Ÿæˆé€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. ãƒŠãƒ¬ãƒƒã‚¸å“è³ªè©•ä¾¡ãŒå¯è¦–åŒ–ã•ã‚Œã‚‹
3. é‡è¤‡ãƒŠãƒ¬ãƒƒã‚¸ã®çµ±åˆæ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹
4. è‡ªå‹•åŒ–å±¥æ­´ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
5. æ—¢å­˜ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†ãƒšãƒ¼ã‚¸ã‹ã‚‰è‡ªå‹•åŒ–ã‚»ãƒ³ã‚¿ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

---

## ğŸ“Š Phase 1 å®Œäº†åŸºæº–

### æ©Ÿèƒ½å®Œæˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] å–¶æ¥­AIåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å®Œæˆï¼ˆ5ã¤ã®æ©Ÿèƒ½ã™ã¹ã¦å‹•ä½œï¼‰
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆåŠŸäºˆæ¸¬ç”»é¢å®Œæˆï¼ˆ4ã¤ã®æ©Ÿèƒ½ã™ã¹ã¦å‹•ä½œï¼‰
- [ ] ãƒŠãƒ¬ãƒƒã‚¸è‡ªå‹•åŒ–UIçµ±åˆå®Œæˆï¼ˆ4ã¤ã®æ©Ÿèƒ½ã™ã¹ã¦å‹•ä½œï¼‰
- [ ] æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆç¢ºèª
- [ ] ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆåˆæ ¼ï¼ˆ2ç§’ä»¥å†…è¡¨ç¤ºï¼‰

### å“è³ªä¿è¨¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿæ–½ãƒ»åˆæ ¼
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½ãƒ»åˆæ ¼
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Ÿæ–½ãƒ»åˆæ ¼
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Ÿæ–½ãƒ»åˆæ ¼
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿæ–½ãƒ»åˆæ ¼

### ãƒªãƒªãƒ¼ã‚¹æº–å‚™ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] ç›£è¦–è¨­å®šå®Œäº†
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰ä½œæˆ
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®šç¢ºèª

### æˆåŠŸæŒ‡æ¨™é”æˆç¢ºèª
- [ ] å–¶æ¥­åŠ¹ç‡400%å‘ä¸Šç¢ºèª
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆåŠŸç‡250%å‘ä¸Šç¢ºèª
- [ ] ãƒŠãƒ¬ãƒƒã‚¸è“„ç©åŠ¹ç‡500%å‘ä¸Šç¢ºèª
- [ ] æ–°æ©Ÿèƒ½åˆ©ç”¨ç‡80%ä»¥ä¸Šé”æˆ

---

**Phase 1å®Œäº†å¾Œã®Next Steps**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†
2. Phase 2å®Ÿè£…è¨ˆç”»ã®è©³ç´°åŒ–
3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
4. æ–°æ©Ÿèƒ½ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°

**ç·Šæ€¥æ™‚å¯¾å¿œ**:
- æ©Ÿèƒ½ä¸å…·åˆæ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ç¢ºèª
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆä½“åˆ¶æ•´å‚™
- ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

**æ–‡æ›¸æ›´æ–°**:
- [ ] å®Ÿè£…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [ ] APIä»•æ§˜æ›¸æ›´æ–°
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«æ›´æ–°
- [ ] ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³æ›´æ–°