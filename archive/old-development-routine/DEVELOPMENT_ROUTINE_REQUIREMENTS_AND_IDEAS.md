# 開発ルーティーン最適化 - 要求とアイデア集

**作成日**: 2025年6月29日  
**ステータス**: 議論中・未確定  
**目的**: Claude Codeリフレッシュ後の一貫性確保に向けた要求整理

---

## 🎯 核心的な要求

### **主要課題**
「Claude Codeをリフレッシュするたびに微妙なギャップが生まれる。同じ状況でも微妙に異なる判断・手順・品質になってしまい、コンテキストコンパクトによる開発の一貫性低下が発生している」

### **実現したい理想**
```
リフレッシュ後のClaude Code = 前回と100%同じ開発体験
- 同じファイルを読む
- 同じ順序で作業する  
- 同じ判断基準を適用する
- 同じ品質基準で完成させる
```

### **特に重要な観点**
- **会話のリフレッシュを頻繁に行う**ことを前提とした設計
- **コンテキストコンパクトによるギャップ**を技術的に解決
- **大規模開発における継続性**の確保

---

## 💭 提案されたアイデア・概念

### **組織階層型ドキュメント管理**
```
💡 アイデア: 企業組織のような責任レベル別管理

CEO Level（絶対不変）:
- CLAUDE.md など、誰も変更できない基本ルール

CTO Level（技術基盤）:
- 技術標準、開発手法、アーキテクチャ規則
- 技術リーダーのみ変更可能

PM Level（プロジェクト管理）:
- 現在の作業指示、Sprint goals、優先度
- プロジェクトマネージャーが進捗に応じて更新

Team Level（作業レベル）:
- 実装中ファイル、一時的Issue
- 完了したら削除・アーカイブ
```

### **3つの必須ドキュメントサイクル**
```
💡 要求: 開発に必ず存在すべき3つのドキュメント

①フェーズごと計画書:
- そのフェーズで何を達成するかの明確化
- フェーズ開始時に作成、フェーズ中は変更しない

②フェーズ進捗管理報告書:
- 現在の進捗状況と次にやるべきことの管理
- リアルタイムで更新

③Claude codeリフレッシュ時における引き継ぎ書:
- 新しいClaude Codeが即座に状況を理解
- リフレッシュ前に作成、リフレッシュ後に削除
```

### **副次的成果物の自然生成**
```
💡 要求: 文書作成を目的化せず、開発の自然な結果として生成

- ユーザーマニュアル（ユーザー目線）
- 技術仕様書（開発者目線）  
- ユーザーフロー（ユーザー体験設計）

※重要: これらは開発の副産物であり、文書作成が主目的ではない
```

### **リフレッシュ後の標準プロトコル**
```
💡 アイデア: 毎回同じ手順での状況把握

新Claude Codeセッション時:
1. 固定ファイル群を固定順序で読み込み
2. 現在の作業状況把握
3. 優先度確認
4. 作業開始

目標時間: 5分以内で前回と同じ開発状態に復帰
```

---

## 🔍 議論で明らかになった要点

### **シンプル化の重要性**
- 初期提案は複雑すぎた（多層ディレクトリ、多数ファイル）
- **95%の無駄を削って、5%の核心だけ残す**方針が重要
- ルーティーンとして非効率では本末転倒

### **目的の明確化**
- マニュアル作成システムではない
- 開発そのものの一貫性が主目的
- 文書整備は副次的効果

### **効率性の要求**
- Claude Codeリフレッシュ後の立ち上がり時間: 5分以内
- 読み込みファイル数: 3-5個程度
- 判断の即座性: 迷いなく次のアクションを決定

---

## 📂 検討されたディレクトリ構造案

### **超シンプル版（最終提案）**
```
/mnt/c/find-to-do-management-app/
├── 🟢 CLAUDE.md                    # CEO: 絶対ルール
├── 🟡 DEV_RULES.md                # CTO: 開発ルール
├── phase-current/                  # 📋 現在のフェーズ
│   ├── PHASE_PLAN.md              # ①フェーズ計画書
│   ├── PROGRESS_REPORT.md         # ②進捗管理
│   └── HANDOVER.md                # ③引き継ぎ書（存在時のみ）
├── active/                        # 🔄 作業中ファイル
└── src/                          # 💻 ソースコード
```

### **リフレッシュ後の読み込み手順**
```bash
cat CLAUDE.md
cat DEV_RULES.md  
cat phase-current/PHASE_PLAN.md
cat phase-current/PROGRESS_REPORT.md
cat phase-current/HANDOVER.md  # 存在する場合のみ
TodoRead
echo "Ready for work"
```

---

## 🚫 避けたい状況（明確化された問題）

### **開発体験の劣化**
- 前回と違う判断をしてしまう
- 完了したタスクをまた見てしまう
- 優先度がわからなくなる
- どのファイルを読めばいいかわからない

### **品質の不一致**
- 命名規則がセッションごとに変わる
- ディレクトリ構造が不統一  
- コミットメッセージ形式がばらつく
- コード品質基準が変わる

### **効率性の低下**
- 同じ情報を何度も確認する
- 完了済みタスクを再調査する
- 優先度判定に時間がかかる
- 手順を思い出すのに時間がかかる

---

## 📋 未解決の検討事項

### **実装詳細**
- [ ] DEV_RULES.mdに含めるべき具体的内容
- [ ] PROGRESS_REPORT.mdの更新タイミング・方法
- [ ] HANDOVER.mdの作成・削除の自動化
- [ ] active/ディレクトリの詳細構造
- [ ] 完了済みファイルの移動・削除ルール

### **運用面**
- [ ] フェーズ切り替え時の具体的手順
- [ ] 複数人開発時の同期方法
- [ ] 長期間のアーカイブ管理
- [ ] ディレクトリサイズ管理

### **技術面**
- [ ] 自動化可能な部分の特定
- [ ] Git運用との整合性
- [ ] CI/CDとの連携
- [ ] バックアップ・復旧方針

---

## 📚 作成済み関連ドキュメント

### **今回の議論で作成したファイル**
1. `/mnt/c/find-to-do-management-app/CLAUDE_ENHANCED_CONSISTENCY_RULES.md`
   - 詳細な一貫性ルール（複雑すぎて却下）

2. `/mnt/c/find-to-do-management-app/PROJECT_CURRENT_STATUS.md`
   - プロジェクト現在状況（PM Level文書の実例）

3. `/mnt/c/find-to-do-management-app/REQUIREMENTS_CLAUDE_CODE_CONSISTENCY.md`
   - Claude Code一貫性要求の詳細仕様書

4. `/mnt/c/find-to-do-management-app/DEVELOPMENT_ROUTINE_REQUIREMENTS_AND_IDEAS.md`
   - このドキュメント（要求とアイデアの集約）

### **既存の関連ファイル**
- `/mnt/c/find-to-do-management-app/CLAUDE.md` - 現在の基本ルール
- `/mnt/c/find-to-do-management-app/docs/ISSUES_INDEX.md` - Issue管理システム
- `/mnt/c/find-to-do-management-app/docs/issues/` - 個別Issue群

---

## 🎯 次の議論ポイント

### **優先検討事項**
1. **3つの必須ドキュメント**の具体的な内容・フォーマット
2. **リフレッシュサイクル**の詳細手順
3. **active/ディレクトリ**の適切な構造
4. **自動化の範囲**と手動管理の境界

### **確認すべき観点**
- 提案されたディレクトリ構造は実用的か？
- リフレッシュ後5分以内での復帰は現実的か？
- 3つの必須ドキュメントで十分な情報をカバーできるか？
- 大規模開発・長期開発での継続性は保てるか？

---

## 📞 議論継続時の参考情報

### **現在の状況**
- Git branch: `feature/mobile-mode-phase-a`
- 進行中作業: LINE連携マニュアル整備完了、Issue管理システム確立
- 課題: リアルタイム監視機能のギャップ、ユーザー登録拡張の承認待ち

### **技術環境**
- Next.js 14, TypeScript, Prisma, PostgreSQL
- Vercel deployment
- LINE Bot integration

### **開発フェーズ**
- 現在: Phase 4 - Reverse Engineering & Enhancement
- 進捗: 部分的完了、継続作業あり

---

**議論の目的**: Claude Codeリフレッシュ時のコンテキストギャップ完全排除  
**現在のステータス**: 要求整理完了、実装方針検討中  
**次のステップ**: リフレッシュ後の議論で具体的実装の決定