# 認証・認可システム マニュアル

## 概要

FIND to DO Management Appの認証・認可システムは、セキュアなアクセス管理とユーザー権限制御を提供する基盤機能です。多様な認証方法をサポートし、組織のセキュリティポリシーに応じた柔軟な権限設定が可能です。

### 主要特徴
- 複数の認証方法（パスワード、2FA、SSO）
- きめ細かな権限管理とロールベースアクセス制御
- セキュリティログの監視と異常検知
- 企業向けシングルサインオン（SSO）連携
- コンプライアンス要件への対応

---

## 目次

1. [ユーザー登録・ログイン](#ユーザー登録ログイン)
2. [二要素認証（2FA）設定](#二要素認証2fa設定)
3. [パスワード管理](#パスワード管理)
4. [権限・ロール管理](#権限ロール管理)
5. [SSO連携設定](#sso連携設定)
6. [セキュリティ設定](#セキュリティ設定)
7. [ログ・監査機能](#ログ監査機能)
8. [トラブルシューティング](#トラブルシューティング)

---

## ユーザー登録・ログイン

### 新規ユーザー登録

#### 1. 基本的な登録手順
1. トップページの「新規登録」ボタンをクリック
2. 必要情報を入力：
   - **メールアドレス**: ログインIDとして使用
   - **パスワード**: 8文字以上の複雑なパスワード
   - **氏名**: フルネームを入力
   - **所属組織**: 会社名・部署名（任意）

#### 2. メール認証
1. 登録後、確認メールが送信されます
2. メール内の「アカウントを有効化」リンクをクリック
3. 認証完了後、ログイン可能になります

**注意**: メール認証を24時間以内に完了してください

#### 3. 初期設定
初回ログイン時に以下の設定を行います：
- プロフィール画像の設定
- タイムゾーンの選択
- 通知設定の調整
- セキュリティ設定の確認

### ログイン方法

#### 通常ログイン
1. ログインページでメールアドレスとパスワードを入力
2. 「ログイン」ボタンをクリック
3. 2FAが有効な場合は認証コードを入力

#### ログイン状態の維持
- 「ログイン状態を保持」チェックボックス
- 最大30日間の自動ログイン
- 共用端末では使用を避けてください

#### パスワードを忘れた場合
1. ログインページの「パスワードを忘れた方」をクリック
2. 登録済みメールアドレスを入力
3. 送信されたリンクからパスワードをリセット

---

## 二要素認証（2FA）設定

### 2FAの有効化

#### 1. 設定画面へのアクセス
1. 右上のプロフィールアイコンをクリック
2. 「セキュリティ設定」を選択
3. 「二要素認証」セクションを確認

#### 2. 認証アプリの設定
1. 「2FAを有効にする」ボタンをクリック
2. QRコードが表示されます
3. 認証アプリでQRコードをスキャン：
   - **Google Authenticator**（推奨）
   - **Microsoft Authenticator**
   - **Authy**

#### 3. 設定の確認
1. 認証アプリで生成されたコードを入力
2. 「確認」ボタンをクリック
3. バックアップコードを安全な場所に保存

### バックアップコードの管理

#### バックアップコードとは
- 認証アプリが使用できない場合の緊急用コード
- 各コードは1回のみ使用可能
- 8個のコードが生成されます

#### 使用方法
1. ログイン時に「バックアップコードを使用」をクリック
2. 保存しておいたコードの1つを入力
3. 使用後は新しいバックアップコードを生成推奨

### 2FAの無効化・再設定

#### 無効化の手順
1. セキュリティ設定から「2FAを無効にする」
2. 現在のパスワードを入力
3. 確認のため認証コードを入力
4. 「無効化する」で完了

---

## パスワード管理

### パスワード要件

#### 安全なパスワードの条件
- **最低8文字以上**
- **大文字・小文字・数字・記号を含む**
- **辞書に載っている単語を避ける**
- **個人情報（誕生日、名前など）を含まない**

#### パスワード強度チェック
- 入力時にリアルタイムで強度を表示
- 「弱い」「普通」「強い」「非常に強い」の4段階
- 「強い」以上のパスワード設定を推奨

### パスワード変更

#### 定期的な変更手順
1. セキュリティ設定から「パスワード変更」を選択
2. 現在のパスワードを入力
3. 新しいパスワードを2回入力
4. 「変更する」ボタンをクリック

#### 変更後の対応
- 全デバイスでの再ログインが必要
- 変更完了メールが送信されます
- API キーやアプリ連携は継続して使用可能

### パスワード履歴・制限

#### 履歴管理
- 過去12回のパスワードは再使用不可
- 最低90日間は同じパスワードを使用不可
- セキュリティポリシーによる制限

#### 失敗回数制限
- **5回連続失敗**: 15分間のアカウントロック
- **10回連続失敗**: 1時間のアカウントロック
- **15回連続失敗**: 管理者による手動解除が必要

---

## 権限・ロール管理

### 基本的な権限レベル

#### ユーザー権限の種類
- **閲覧者**: データの閲覧のみ
- **編集者**: データの作成・編集
- **管理者**: ユーザー管理・設定変更
- **システム管理者**: 全権限

#### 機能別権限設定
各機能に対して個別に権限を設定可能：
- **タスク管理**: 作成、編集、削除、アーカイブ
- **プロジェクト管理**: 新規作成、メンバー管理、設定変更
- **レポート**: 閲覧、出力、共有
- **システム設定**: アクセス、変更、権限付与

### ロールベースアクセス制御

#### 標準ロールの種類

##### プロジェクトマネージャー
- プロジェクト全体の管理権限
- チームメンバーの権限設定
- 進捗レポートの作成・共有

##### チームリーダー
- 担当チーム内での管理権限
- タスク割り当て・進捗管理
- チーム内のコミュニケーション管理

##### メンバー
- 自分に割り当てられたタスクの管理
- プロジェクト情報の閲覧
- 基本的なレポート機能の使用

#### カスタムロールの作成
1. 管理者設定から「ロール管理」を選択
2. 「新しいロール」ボタンをクリック
3. ロール名と説明を設定
4. 各機能の権限レベルを個別に設定
5. 保存後、ユーザーにロールを割り当て

### 組織・部署別権限管理

#### 階層的な組織管理
- **会社レベル**: 最上位の権限管理
- **部署レベル**: 部署内のリソースアクセス
- **チームレベル**: 具体的なプロジェクト権限
- **個人レベル**: 個別のタスクアクセス

#### 権限の継承
- 上位組織の権限は下位組織に継承
- 下位組織で権限の制限は可能
- 権限の追加は上位組織の承認が必要

---

## SSO連携設定

### 対応SSO プロバイダー

#### 企業向けSSO
- **Microsoft Azure AD**: Office 365連携
- **Google Workspace**: Gmail・Google Apps連携
- **Okta**: エンタープライズSSO
- **LDAP/Active Directory**: オンプレミス環境

#### SNS ログイン（オプション）
- **Google アカウント**: 個人利用向け
- **Microsoft アカウント**: 個人利用向け

### SSO設定手順

#### 管理者側の設定
1. システム設定から「SSO設定」を選択
2. 使用するSSO プロバイダーを選択
3. 必要な設定情報を入力：
   - **ドメイン名**: 組織のドメイン
   - **クライアントID**: SSO プロバイダーから取得
   - **シークレットキー**: セキュリティ認証用
   - **コールバックURL**: 認証後のリダイレクト先

#### ユーザー側の利用
1. ログイン画面で「SSO ログイン」を選択
2. 組織のSSO プロバイダーにリダイレクト
3. 既存の企業アカウントでログイン
4. 初回のみアカウント紐付けの確認

### SSO ユーザー管理

#### 自動プロビジョニング
- 新規ユーザーの自動作成
- グループ情報に基づく自動ロール割り当て
- ユーザー情報の自動同期

#### 手動管理との併用
- SSO ユーザーと通常ユーザーの混在可能
- 管理者による手動でのロール調整
- 緊急時のローカルアカウントアクセス

---

## セキュリティ設定

### アカウントセキュリティ

#### セッション管理
- **セッション有効期限**: 8時間（調整可能）
- **同時ログイン数制限**: 最大3デバイス
- **非アクティブ時の自動ログアウト**: 30分

#### IP アドレス制限
1. セキュリティ設定から「IP制限」を選択
2. 許可するIPアドレス範囲を設定
3. 「すべて拒否」→「許可リストのみ」に変更
4. 設定保存後、指定IPからのみアクセス可能

#### デバイス管理
- **信頼済みデバイス**: 定期認証を簡略化
- **デバイス登録**: ブラウザ・アプリの登録管理
- **不審なアクセスの検知**: 新しいデバイスからのアクセス通知

### 通知・アラート設定

#### セキュリティ通知の種類
- **ログイン通知**: 新しい場所・デバイスからのアクセス
- **パスワード変更**: 変更完了とセキュリティ確認
- **権限変更**: ロール・権限の変更通知
- **失敗ログイン**: 連続失敗時のアラート

#### 通知方法の設定
1. 通知設定から「セキュリティ通知」を選択
2. 通知したい項目にチェック
3. 通知方法を選択：
   - **メール通知**: 即座に送信
   - **SMS通知**: 緊急時のみ（要設定）
   - **アプリ内通知**: ログイン時に確認

---

## ログ・監査機能

### アクセスログの確認

#### ログ画面へのアクセス
1. 管理者権限でログイン
2. システム管理から「セキュリティログ」を選択
3. 確認したい期間・種類を選択

#### 記録される情報
- **ログイン・ログアウト**: 日時、IPアドレス、デバイス情報
- **権限変更**: 変更者、対象者、変更内容
- **データアクセス**: アクセスした情報、操作内容
- **設定変更**: システム設定の変更履歴

### 異常検知・アラート

#### 自動検知機能
- **異常ログイン**: 通常と異なる時間・場所からのアクセス
- **権限昇格**: 短期間での権限レベル変更
- **大量データアクセス**: 通常より多い情報へのアクセス
- **失敗パターン**: 攻撃的なログイン試行

#### インシデント対応
1. 異常検知時の自動アラート送信
2. 管理者による詳細調査
3. 必要に応じたアカウント停止
4. インシデントレポートの作成

### コンプライアンス対応

#### 監査レポート
- **アクセス権限レポート**: 全ユーザーの権限状況
- **操作履歴レポート**: 重要データへのアクセス記録
- **セキュリティ事象レポート**: インシデント一覧と対応状況

#### データ保持ポリシー
- **ログ保持期間**: 最低12ヶ月間
- **削除ユーザーデータ**: 90日後に完全削除
- **バックアップ**: 定期的な安全な場所での保管

---

## トラブルシューティング

### よくある問題と解決方法

#### Q1: ログインできない
**原因と対処法:**
- パスワードを忘れた
  → 「パスワードを忘れた方」からリセット
- アカウントがロックされている
  → 管理者に解除を依頼
- 2FAコードが認識されない
  → 時刻設定を確認、バックアップコードを使用

#### Q2: 2FAが設定できない
**原因と対処法:**
- 認証アプリがQRコードを読み取れない
  → 手動でコードを入力
- 時刻がずれている
  → デバイスの時刻設定を自動同期に変更

#### Q3: SSO ログインができない
**原因と対処法:**
- 企業アカウントが無効
  → IT部門に確認
- ドメイン設定が間違っている
  → 管理者に設定確認を依頼

#### Q4: 権限が正しく設定されない
**原因と対処法:**
- 組織階層の設定ミス
  → 上位組織の権限を確認
- ロールの継承問題
  → 個別にロールを再設定

### セキュリティインシデント対応

#### 不正アクセスの疑いがある場合
1. **即座にパスワード変更**
2. **全デバイスからログアウト**
3. **2FAの再設定**
4. **管理者への報告**

#### アカウント乗っ取りの対処
1. 管理者にアカウント停止を依頼
2. セキュリティチームに連絡
3. アクセスログの詳細確認
4. 影響範囲の調査と対応

### パフォーマンス問題

#### ログイン・認証が遅い場合
- **ネットワーク環境の確認**
- **ブラウザキャッシュのクリア**
- **2FA アプリの再起動**
- **VPN・プロキシ設定の確認**

#### 権限反映の遅れ
- 通常5分以内に反映
- 緊急時は管理者がキャッシュクリア
- ログアウト・再ログインで即座に反映

---

## まとめ

認証・認可システムを適切に活用することで、以下の効果が期待できます：

### 期待効果
- **セキュリティ強化**: 不正アクセスの防止
- **利便性向上**: SSO による簡単ログイン
- **管理効率化**: 自動化された権限管理
- **コンプライアンス対応**: 監査要件の満足

### セキュリティのベストプラクティス
- **強固なパスワード**: 定期的な変更と複雑性の確保
- **2FA の活用**: 可能な限り二要素認証を有効化
- **権限の最小化**: 必要最小限の権限付与
- **定期的な監査**: アクセス権限の定期見直し

適切な認証・認可により、安全で効率的なシステム利用を実現できます。