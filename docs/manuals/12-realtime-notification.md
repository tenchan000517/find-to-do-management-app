# リアルタイム・通知システム マニュアル

## 概要

FIND to DO Management Appのリアルタイム・通知システムは、WebSocket通信とプッシュ通知を活用して、プロジェクトの進捗、アラート、重要な更新をリアルタイムで配信するシステムです。多様な通知チャンネルを通じて、適切なタイミングで必要な情報を届けることで、効率的なプロジェクト管理をサポートします。

### 主要特徴
- リアルタイムダッシュボードによる即座の状況把握
- 多チャンネル通知システム（LINE・Discord・アプリ内通知）
- 自動アラート生成と重要度判定
- WebSocket通信による低遅延データ配信
- プロジェクト健全性の自動監視

---

## 目次

1. [リアルタイムダッシュボード](#リアルタイムダッシュボード)
2. [通知センター](#通知センター)
3. [アラート管理システム](#アラート管理システム)
4. [LINE Bot通知連携](#line-bot通知連携)
5. [Discord統合通知](#discord統合通知)
6. [プロジェクト監視機能](#プロジェクト監視機能)
7. [通知設定・カスタマイズ](#通知設定カスタマイズ)
8. [トラブルシューティング](#トラブルシューティング)

---

## リアルタイムダッシュボード

### ダッシュボードの基本操作

#### 1. リアルタイムダッシュボードへのアクセス
1. メインメニューから「リアルタイム監視」を選択
2. ダッシュボードが自動で最新情報を表示
3. 30秒間隔で自動更新される情報を確認

#### 2. 表示される情報
**即座に確認できる指標：**
- **アクティブユーザー数**: 現在ログイン中のユーザー
- **完了タスク数**: 本日完了したタスクの数
- **進行中プロジェクト**: 現在進行中のプロジェクト状況
- **今月の売上**: リアルタイム売上集計
- **リスクスコア**: システム全体の健全性指標

#### 3. 活動フィードの確認
**リアルタイム活動表示：**
- タスクの完了・更新
- 新規プロジェクトの開始
- リスクアラートの発生
- 新規ユーザーの登録
- 売上の更新

#### 4. 接続状態の監視
**接続インジケーター：**
- **緑**: WebSocket接続正常
- **黄**: ポーリング接続に切り替え中
- **赤**: 接続エラー（再接続を試行中）

### ダッシュボードの活用方法

#### 1. 即座の状況把握
- プロジェクト管理者が全体状況を一目で確認
- 緊急対応が必要な項目のハイライト表示
- チーム全体の活動レベルの把握

#### 2. 異常の早期発見
- 通常とは異なるパターンの自動検出
- リスクスコアの急激な変化への対応
- 活動停滞の早期警告

---

## 通知センター

### 通知センターの使用方法

#### 1. 通知センターの開き方
1. 画面右上の通知アイコン（ベル）をクリック
2. 未読通知数がバッジで表示
3. 通知一覧が新しい順に表示

#### 2. 通知の種類と色分け
**重要度による色分け：**
- **赤（Critical）**: 緊急対応が必要
- **オレンジ（High）**: 高優先度で対応
- **黄（Medium）**: 注意が必要
- **青（Low）**: 情報提供

**通知カテゴリ：**
- **プロジェクトアラート**: 進捗遅延・停滞
- **財務リスク**: 売上・予算関連
- **ユーザー負荷**: 過重労働の警告
- **システム通知**: メンテナンス・更新情報

#### 3. 通知の操作
- **既読にする**: 通知をクリックで既読
- **詳細確認**: 通知内容の詳細表示
- **アクション実行**: 推奨される対応を実行
- **通知削除**: 不要な通知の削除

### 通知フィルタリング

#### 1. 重要度別フィルタ
- 緊急度の高いもののみ表示
- 自分に関連する通知のみ
- 特定プロジェクトの通知のみ

#### 2. 期間別表示
- 今日の通知
- 過去1週間の通知
- 未対応の通知のみ

---

## アラート管理システム

### 自動アラート生成の仕組み

#### 1. プロジェクト健全性監視
**監視項目：**
- **進捗停滞**: 一定期間更新がないプロジェクト
- **期限超過**: 予定期限を過ぎたタスク・プロジェクト
- **フェーズ停滞**: 同じフェーズに長期間滞留
- **アクティビティ不足**: チームの活動が低下

#### 2. ユーザー負荷監視
**監視基準：**
- **過重労働**: 推奨時間を大幅に超過
- **タスク集中**: 一人に多数のタスクが集中
- **ワークライフバランス**: 休日・夜間の作業過多

#### 3. 財務リスク監視
**監視対象：**
- **LTV低下**: 顧客生涯価値の大幅減少
- **予算超過**: プロジェクト予算のオーバーラン
- **売上減少**: 前期比での売上大幅減少
- **顧客離脱リスク**: 連絡不通・関係悪化

### アラート対応の流れ

#### 1. アラート受信
1. 通知センターでアラート確認
2. 重要度と内容の把握
3. 対応期限の確認

#### 2. 詳細分析
1. アラート詳細画面を開く
2. 原因分析情報の確認
3. 影響範囲の把握
4. 推奨対応策の検討

#### 3. 対応実行
1. 推奨アクションの実行
2. 関係者への連絡
3. 対応状況の記録
4. フォローアップの設定

#### 4. 完了・解決
1. 問題解決の確認
2. アラートを「解決済み」にマーク
3. 再発防止策の検討
4. 教訓の記録

---

## LINE Bot通知連携

### LINE Bot通知システムの概要

#### 1. LINE Botとリアルタイム通知の統合
FIND to DO Management AppのLINE Botは、単なる操作インターフェースではなく、**包括的な通知システム**として機能します。WebSocketによるリアルタイム監視と連携し、重要な変更や緊急事態を即座にLINEで通知します。

#### 2. 通知配信の仕組み
1. **リアルタイム監視**: システムが各種データを4時間ごと + 即座監視
2. **重要度判定**: AI分析による通知の重要度自動分類
3. **配信条件チェック**: ユーザー設定・時間帯・緊急度の確認
4. **LINE配信**: LINE Messaging APIによる確実な配信
5. **配信確認**: 既読・未読状況の追跡

### LINE通知の全種類

#### 1. 緊急度：Critical（即座配信）
- **システム障害**: Webサービス・データベース異常
- **セキュリティアラート**: 不正アクセス・認証異常
- **重大プロジェクトリスク**: プロジェクト停止・重大な遅延
- **財務重大リスク**: 重要顧客の契約解除リスク

#### 2. 緊急度：High（1時間以内配信）
- **期限切れ警告**: タスク・アポイントメントの期限超過
- **プロジェクト遅延**: スケジュールからの大幅逸脱
- **チーム問題**: メンバーの過重労働・長期不在
- **営業緊急事項**: 重要商談・クレーム対応

#### 3. 緊急度：Medium（4時間以内配信）
- **新規タスク割り当て**: 自分への新しいタスク
- **進捗更新通知**: 担当プロジェクトの状況変化
- **期限予告**: 3日前・1日前のリマインダー
- **システム更新**: 機能追加・変更の通知

#### 4. 緊急度：Low（日次サマリー）
- **日次完了レポート**: その日の達成状況
- **週次分析**: 週間パフォーマンス
- **月次統計**: 月間成果・改善提案
- **学習機会**: スキルアップ・セミナー情報

### 詳細なLINE通知設定

#### 1. Web画面での設定
1. **通知設定画面**: 設定メニュー→「通知・アラート」→「LINE通知」
2. **基本設定**:
   - 通知の有効/無効の切り替え
   - 緊急度別の通知ON/OFF
   - 時間帯制限の設定
   - プロジェクト別通知設定

#### 2. 時間帯制限の詳細設定
- **業務時間**: 平日9:00-18:00のみ通知
- **緊急度例外**: Critical・Highは時間外も配信
- **休日設定**: 土日祝日の通知制御
- **個人時間帯**: 個人の都合に合わせた時間設定

#### 3. 通知内容のカスタマイズ
**通知形式の選択:**
- **簡潔モード**: 1-2行の要約のみ
- **詳細モード**: 状況説明・推奨アクション含む
- **リンク付きモード**: Webダッシュボードへの直接リンク

**フィルタリング設定:**
- 自分が担当のタスクのみ
- 参加プロジェクトのみ
- 管理者権限範囲のみ
- 営業関連のみ（営業職向け）

### LINE通知の実際の例

#### Critical通知の例
```
🚨【緊急】システム障害発生
サーバー接続エラーが発生しています
対応状況を確認してください
詳細: https://dashboard.findtodo.com/alerts/001
```

#### High通知の例
```
⚠️【重要】期限超過タスクあり
「企画書作成」の期限が過ぎています
担当: 田中さん / 期限: 昨日
即座の対応をお願いします
```

#### Medium通知の例
```
📋 新しいタスクが割り当てられました
「顧客ヒアリング資料作成」
期限: 来週金曜 / 優先度: B
詳細確認→ https://dashboard.findtodo.com/tasks/123
```

### LINE Bot双方向操作機能

#### 1. 通知への直接応答
- **既読確認**: 「確認」「了解」などの返信
- **対応報告**: 「対応完了」「進行中」などのステータス更新
- **詳細要求**: 「詳細」「もっと情報」で追加情報表示

#### 2. 通知設定のLINE変更
- **一時停止**: 「通知停止 2時間」など
- **緊急度変更**: 「緊急のみ」「全て停止」
- **設定確認**: 「通知設定」で現在の設定表示

#### 3. 能動的な情報取得
- **状況確認**: 「今日のタスク」「プロジェクト状況」
- **アラート確認**: 「未対応アラート」「緊急事項」
- **レポート要求**: 「週次レポート」「今月の成績」

### リアルタイム通知とLINE連携の技術詳細

#### 1. WebSocket → LINE Botの配信フロー
1. **リアルタイム監視**: WebSocketでデータ変更を即座検知
2. **重要度判定**: AIエンジンによる自動分類（Critical～Low）
3. **配信判定**: ユーザー設定・時間帯・緊急度の総合判定
4. **メッセージ生成**: 内容・形式の自動生成
5. **LINE配信**: LINE Messaging APIで確実配信
6. **配信結果記録**: 成功・失敗・既読状況の記録

#### 2. 遅延防止・信頼性確保
- **配信優先度キュー**: Critical通知の優先配信
- **再送機能**: 配信失敗時の自動再送（最大3回）
- **配信確認**: LINE側での既読確認
- **フォールバック**: LINE不達時のメール・Web通知

#### 3. パフォーマンス最適化
- **バッチ処理**: 低優先度通知のまとめ送信
- **重複排除**: 同内容通知の自動統合
- **負荷分散**: 時間帯による配信量調整

### 営業特化LINE通知機能

#### 1. 営業データに特化した通知
- **商談進捗**: 成約確率変動の自動通知
- **顧客行動**: 重要顧客のWebサイト訪問・資料ダウンロード
- **競合情報**: 競合他社の動向・価格変更
- **営業目標**: 月次・四半期目標の達成状況

#### 2. AI予測による営業通知
- **成約確率アラート**: AI予測による確率変動
- **最適アクション提案**: 次に取るべき営業アクション
- **フォローアップ催促**: 最適なタイミングでの連絡推奨
- **リスク早期警告**: 契約解除・競合切り替えリスク

### トラブルシューティング（LINE通知特化）

#### よくある問題と解決方法

**Q1: LINE通知が届かない**
- **原因1**: LINE Bot友だち削除・ブロック
  - 対処: 友だち再追加、ブロック解除
- **原因2**: Web設定でLINE通知無効
  - 対処: 設定画面で「LINE通知」を有効化
- **原因3**: 時間帯制限設定
  - 対処: 時間帯設定を確認・変更

**Q2: 通知が多すぎる**
- **原因**: 緊急度設定が「Low」まで含まれている
- **対処**: 「High」以上のみに設定変更

**Q3: 重要な通知を見逃す**
- **原因**: 大量の低優先度通知に埋もれる
- **対処**: 
  1. Critical・High通知の専用着信音設定
  2. VIP通知の別LINEアカウント設定
  3. Web通知との併用

**Q4: 通知内容が理解しにくい**
- **原因**: 簡潔モードでの情報不足
- **対処**: 詳細モードに設定変更

### LINE通知活用のベストプラクティス

#### 1. 個人利用の最適化
- **緊急度設定**: 自分の業務に応じた適切な設定
- **時間管理**: プライベート時間の確保
- **能動的活用**: 定期的な状況確認コマンド使用

#### 2. チーム利用の最適化
- **役割別設定**: 管理者・メンバーで異なる通知設定
- **escalation設定**: 未対応時の上位者通知
- **情報共有**: 重要通知のチーム共有

#### 3. 組織導入時の注意点
- **段階的導入**: 重要度の高い通知から開始
- **教育・研修**: LINE Bot操作の社内教育
- **定期見直し**: 通知設定の効果測定・改善

**参考**: LINE Botの操作全般については「[09-social-external-integration.md](09-social-external-integration.md#line-bot連携)」を参照

---

## Discord統合通知

### Discord-LINE 通知ブリッジ

#### 1. Discord イベントの自動通知
**対象イベント：**
- **新メンバー参加**: サーバーへの新規参加
- **スタッフ不在**: 管理者の長期離席
- **サーバーブースト**: サーバーのブースト獲得
- **重要告知**: サーバー内の重要発表

#### 2. 通知の流れ
1. Discordサーバーでイベント発生
2. Webhook APIが自動検知
3. 内容を日本語化・整理
4. LINEグループに自動送信
5. 必要に応じて個別通知も実行

#### 3. 通知内容のカスタマイズ
- 通知するイベントの選択
- 通知先LINEグループの設定
- メッセージテンプレートの編集
- 重要度による配信先振り分け

---

## プロジェクト監視機能

### 自動監視システム

#### 1. プロジェクト健全性チェック
**4時間ごとの自動チェック：**
- プロジェクトの進捗停滞
- タスクの期限超過
- メンバーの活動状況
- リソース配分の適切性

#### 2. 異常パターンの検出
**検出される異常：**
- **進捗の完全停止**: 3日間以上更新なし
- **極端な遅延**: 予定から大幅に遅れ
- **リソース枯渇**: 必要人員の不足
- **品質の劣化**: 成果物品質の低下

#### 3. 早期警告システム
- 問題の兆候を事前検知
- 予防的な対応策の提案
- 関係者への自動通知
- エスカレーション手順の実行

### カスタム監視ルール

#### 1. プロジェクト別設定
- プロジェクトの特性に応じた監視基準
- 重要度による監視頻度の調整
- 特定条件での詳細監視

#### 2. チーム別設定
- チームの働き方に応じた調整
- メンバーの特性を考慮した基準
- 個人の能力・経験レベルの反映

---

## 通知設定・カスタマイズ

### 個人向け通知設定

#### 1. 基本設定
1. プロフィール設定から「通知設定」を選択
2. 通知方法を選択：
   - **アプリ内通知**: ブラウザ内での表示
   - **デスクトップ通知**: OS レベルの通知
   - **LINE通知**: LINE Bot経由
   - **メール通知**: 電子メール

#### 2. 詳細カスタマイズ
**通知タイミング：**
- **即座**: 発生時に即座に通知
- **まとめて**: 30分〜2時間間隔でまとめて
- **定時**: 指定時刻に一日分をまとめて

**通知内容の調整：**
- 簡潔版 vs 詳細版
- 推奨アクション含む vs 情報のみ
- 関連情報の添付有無

### 管理者向け設定

#### 1. 全体通知ポリシー
- 組織全体の通知基準設定
- 緊急度判定の閾値調整
- エスカレーション ルールの設定

#### 2. チーム別通知設定
- 部署・チームごとの通知ルール
- 責任者への報告タイミング
- 外部ステークホルダーへの通知

---

## トラブルシューティング

### よくある問題と解決方法

#### Q1: リアルタイム更新が止まっている
**原因と対処法：**
- WebSocket接続の問題
  → ページを再読み込みして再接続
- ネットワーク不安定
  → 自動でポーリングモードに切り替わるまで待機

#### Q2: 通知が届かない
**原因と対処法：**
- 通知設定が無効
  → 設定メニューで通知を有効化
- LINE連携の問題
  → LINE Bot を再度友だち追加

#### Q3: 不要な通知が多すぎる
**原因と対処法：**
- 通知レベルが敏感すぎる
  → 設定で重要度を「高」以上のみに調整
- 監視対象が広すぎる
  → 関心のあるプロジェクトのみに絞り込み

#### Q4: アラートの対応方法がわからない
**原因と対処法：**
- 推奨アクションを確認
  → アラート詳細の「推奨対応」セクションを参照
- 経験不足
  → 上司・先輩に相談後、対応履歴に記録

### パフォーマンス最適化

#### 1. 通知の効率化
- 重複通知の統合
- 関連通知のグループ化
- 自動解決の活用

#### 2. システム負荷軽減
- 不要な通知の停止
- 監視頻度の適正化
- 古い通知データの整理

---

## まとめ

リアルタイム・通知システムを効果的に活用することで、以下の効果が期待できます：

### 期待効果
- **迅速な問題対応**: 早期発見による被害最小化
- **情報共有の効率化**: 重要情報の確実な伝達
- **プロアクティブな管理**: 問題の予防的対応
- **チーム連携の向上**: リアルタイム情報による協調

### 活用のコツ
- 通知設定の定期的な見直し
- 重要度に応じた対応優先度の明確化
- チーム内でのアラート対応ルールの共有
- システムの自動化機能の積極的活用

このシステムにより、プロジェクトの健全性を常に監視し、適切なタイミングで必要な情報を配信することで、効率的で安全なプロジェクト運営を実現できます。